import{$ as wt,$b as bn,A as P,Aa as Te,B as pi,Ba as _e,C as l,Ca as Mt,Cb as Ot,D as Li,Da as H,Db as Lt,E as gi,Ea as N,Eb as cn,F as T,Fa as B,Fb as tt,G as M,Gb as ze,H as Ie,Hb as ln,I as Fi,Ia as Ue,Ib as dn,J as fi,Ja as w,Jb as we,K as ce,Kb as ye,L as Ni,La as $,Lb as vi,M as le,Ma as Hi,Mb as Ft,N as Be,Na as $i,Nb as hn,Oa as Wi,Ob as it,Pb as mn,Q as G,Qa as Dt,Qb as Nt,Ra as ie,Rb as un,S as je,Sa as Me,Sb as wi,T as Bi,Ta as _i,Tb as ne,U as pe,Ua as zi,Ub as Bt,Va as qi,Vb as pn,W as bt,Wa as Gi,Wb as gn,X as ge,Xa as be,Xb as fn,Y as p,Ya as K,Yb as _n,Z as vt,Za as He,a as v,aa as ji,ab as Et,b as ee,bb as Qi,c as Oe,ca as C,cb as $e,cc as vn,d as g,da as fe,db as Yi,e as pt,ea as yt,eb as Xi,f as gt,fa as et,fb as Ki,g as F,ga as I,gb as Ji,gc as wn,h as ft,ha as Vi,hb as Rt,ia as Ct,j as Je,ja as O,jb as Zi,k as Ze,ka as E,kb as z,l as _t,la as St,lb as en,m as Le,ma as X,mb as tn,n as Fe,na as Ve,nb as At,o as te,oa as R,ob as nn,p as W,pa as Ui,pb as on,qa as kt,qb as bi,ra as xt,s as he,sa as h,sb as De,t as me,ta as m,tb as Pt,u as Ai,ua as b,v as Ne,va as It,vb as rn,w as Pi,wa as U,wb as sn,x as Oi,xa as Tt,xb as ve,y as J,ya as D,yb as We,z as ue,za as y,zb as an}from"./chunk-XD6L3HVD.js";var yi=(o,t)=>!l(z).isLoggedIn();var no=["mat-menu-item",""],oo=[[["mat-icon"],["","matMenuItemIcon",""]],"*"],ro=["mat-icon, [matMenuItemIcon]","*"];function so(o,t){o&1&&(Ie(),h(0,"svg",2),b(1,"polygon",3),m())}var ao=["*"];function co(o,t){if(o&1){let e=U();h(0,"div",0),D("click",function(){T(e);let n=y();return M(n.closed.emit("click"))})("animationstart",function(n){T(e);let r=y();return M(r._onAnimationStart(n.animationName))})("animationend",function(n){T(e);let r=y();return M(r._onAnimationDone(n.animationName))})("animationcancel",function(n){T(e);let r=y();return M(r._onAnimationDone(n.animationName))}),h(1,"div",1),_e(2),m()()}if(o&2){let e=y();Ve(e._classList),X("mat-menu-panel-animations-disabled",e._animationsDisabled)("mat-menu-panel-exit-animation",e._panelAnimationState==="void")("mat-menu-panel-animating",e._isAnimating),E("id",e.panelId),O("aria-label",e.ariaLabel||null)("aria-labelledby",e.ariaLabelledby||null)("aria-describedby",e.ariaDescribedby||null)}}var Si=new P("MAT_MENU_PANEL"),ot=(()=>{class o{_elementRef=l(G);_document=l(Et);_focusMonitor=l(De);_parentMenu=l(Si,{optional:!0});_changeDetectorRef=l(be);role="menuitem";disabled=!1;disableRipple=!1;_hovered=new F;_focused=new F;_highlighted=!1;_triggersSubmenu=!1;constructor(){l(Pt).load(Lt),this._parentMenu?.addItem?.(this)}focus(e,i){this._focusMonitor&&e?this._focusMonitor.focusVia(this._getHostElement(),e,i):this._getHostElement().focus(i),this._focused.next(this)}ngAfterViewInit(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}ngOnDestroy(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._elementRef.nativeElement}_checkDisabled(e){this.disabled&&(e.preventDefault(),e.stopPropagation())}_handleMouseEnter(){this._hovered.next(this)}getLabel(){let e=this._elementRef.nativeElement.cloneNode(!0),i=e.querySelectorAll("mat-icon, .material-icons");for(let n=0;n<i.length;n++)i[n].remove();return e.textContent?.trim()||""}_setHighlighted(e){this._highlighted=e,this._changeDetectorRef.markForCheck()}_setTriggersSubmenu(e){this._triggersSubmenu=e,this._changeDetectorRef.markForCheck()}_hasFocus(){return this._document&&this._document.activeElement===this._getHostElement()}static \u0275fac=function(i){return new(i||o)};static \u0275cmp=C({type:o,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-mdc-menu-item","mat-focus-indicator"],hostVars:8,hostBindings:function(i,n){i&1&&D("click",function(s){return n._checkDisabled(s)})("mouseenter",function(){return n._handleMouseEnter()}),i&2&&(O("role",n.role)("tabindex",n._getTabIndex())("aria-disabled",n.disabled)("disabled",n.disabled||null),X("mat-mdc-menu-item-highlighted",n._highlighted)("mat-mdc-menu-item-submenu-trigger",n._triggersSubmenu))},inputs:{role:"role",disabled:[2,"disabled","disabled",K],disableRipple:[2,"disableRipple","disableRipple",K]},exportAs:["matMenuItem"],attrs:no,ngContentSelectors:ro,decls:5,vars:3,consts:[[1,"mat-mdc-menu-item-text"],["matRipple","",1,"mat-mdc-menu-ripple",3,"matRippleDisabled","matRippleTrigger"],["viewBox","0 0 5 10","focusable","false","aria-hidden","true",1,"mat-mdc-menu-submenu-icon"],["points","0,0 5,5 0,10"]],template:function(i,n){i&1&&(Te(oo),_e(0),h(1,"span",0),_e(2,1),m(),b(3,"div",1),I(4,so,2,0,":svg:svg",2)),i&2&&(p(3),E("matRippleDisabled",n.disableRipple||n.disabled)("matRippleTrigger",n._getHostElement()),p(),R(n._triggersSubmenu?4:-1))},dependencies:[Ot],encapsulation:2,changeDetection:0})}return o})();var lo=new P("MatMenuContent");var ho=new P("mat-menu-default-options",{providedIn:"root",factory:mo});function mo(){return{overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"}}var Ci="_mat-menu-enter",jt="_mat-menu-exit",qe=(()=>{class o{_elementRef=l(G);_changeDetectorRef=l(be);_injector=l(ce);_keyManager;_xPosition;_yPosition;_firstItemFocusRef;_exitFallbackTimeout;_animationsDisabled;_allItems;_directDescendantItems=new Bi;_classList={};_panelAnimationState="void";_animationDone=new F;_isAnimating=!1;parentMenu;direction;overlayPanelClass;backdropClass;ariaLabel;ariaLabelledby;ariaDescribedby;get xPosition(){return this._xPosition}set xPosition(e){this._xPosition=e,this.setPositionClasses()}get yPosition(){return this._yPosition}set yPosition(e){this._yPosition=e,this.setPositionClasses()}templateRef;items;lazyContent;overlapTrigger;hasBackdrop;set panelClass(e){let i=this._previousPanelClass,n=v({},this._classList);i&&i.length&&i.split(" ").forEach(r=>{n[r]=!1}),this._previousPanelClass=e,e&&e.length&&(e.split(" ").forEach(r=>{n[r]=!0}),this._elementRef.nativeElement.className=""),this._classList=n}_previousPanelClass;get classList(){return this.panelClass}set classList(e){this.panelClass=e}closed=new le;close=this.closed;panelId=l(ve).getId("mat-menu-panel-");constructor(){let e=l(ho);this.overlayPanelClass=e.overlayPanelClass||"",this._xPosition=e.xPosition,this._yPosition=e.yPosition,this.backdropClass=e.backdropClass,this.overlapTrigger=e.overlapTrigger,this.hasBackdrop=e.hasBackdrop,this._animationsDisabled=l(pe,{optional:!0})==="NoopAnimations"}ngOnInit(){this.setPositionClasses()}ngAfterContentInit(){this._updateDirectDescendants(),this._keyManager=new an(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._keyManager.tabOut.subscribe(()=>this.closed.emit("tab")),this._directDescendantItems.changes.pipe(he(this._directDescendantItems),me(e=>Le(...e.map(i=>i._focused)))).subscribe(e=>this._keyManager.updateActiveItem(e)),this._directDescendantItems.changes.subscribe(e=>{let i=this._keyManager;if(this._panelAnimationState==="enter"&&i.activeItem?._hasFocus()){let n=e.toArray(),r=Math.max(0,Math.min(n.length-1,i.activeItemIndex||0));n[r]&&!n[r].disabled?i.setActiveItem(r):i.setNextItemActive()}})}ngOnDestroy(){this._keyManager?.destroy(),this._directDescendantItems.destroy(),this.closed.complete(),this._firstItemFocusRef?.destroy(),clearTimeout(this._exitFallbackTimeout)}_hovered(){return this._directDescendantItems.changes.pipe(he(this._directDescendantItems),me(i=>Le(...i.map(n=>n._hovered))))}addItem(e){}removeItem(e){}_handleKeydown(e){let i=e.keyCode,n=this._keyManager;switch(i){case 27:We(e)||(e.preventDefault(),this.closed.emit("keydown"));break;case 37:this.parentMenu&&this.direction==="ltr"&&this.closed.emit("keydown");break;case 39:this.parentMenu&&this.direction==="rtl"&&this.closed.emit("keydown");break;default:(i===38||i===40)&&n.setFocusOrigin("keyboard"),n.onKeydown(e);return}}focusFirstItem(e="program"){this._firstItemFocusRef?.destroy(),this._firstItemFocusRef=bt(()=>{let i=this._resolvePanel();if(!i||!i.contains(document.activeElement)){let n=this._keyManager;n.setFocusOrigin(e).setFirstItemActive(),!n.activeItem&&i&&i.focus()}},{injector:this._injector})}resetActiveItem(){this._keyManager.setActiveItem(-1)}setElevation(e){}setPositionClasses(e=this.xPosition,i=this.yPosition){this._classList=ee(v({},this._classList),{"mat-menu-before":e==="before","mat-menu-after":e==="after","mat-menu-above":i==="above","mat-menu-below":i==="below"}),this._changeDetectorRef.markForCheck()}_onAnimationDone(e){let i=e===jt;(i||e===Ci)&&(i&&(clearTimeout(this._exitFallbackTimeout),this._exitFallbackTimeout=void 0),this._animationDone.next(i?"void":"enter"),this._isAnimating=!1)}_onAnimationStart(e){(e===Ci||e===jt)&&(this._isAnimating=!0)}_setIsOpen(e){if(this._panelAnimationState=e?"enter":"void",e){if(this._keyManager.activeItemIndex===0){let i=this._resolvePanel();i&&(i.scrollTop=0)}}else this._animationsDisabled||(this._exitFallbackTimeout=setTimeout(()=>this._onAnimationDone(jt),200));this._animationsDisabled&&setTimeout(()=>{this._onAnimationDone(e?Ci:jt)}),this._changeDetectorRef.markForCheck()}_updateDirectDescendants(){this._allItems.changes.pipe(he(this._allItems)).subscribe(e=>{this._directDescendantItems.reset(e.filter(i=>i._parentMenu===this)),this._directDescendantItems.notifyOnChanges()})}_resolvePanel(){let e=null;return this._directDescendantItems.length&&(e=this._directDescendantItems.first._getHostElement().closest('[role="menu"]')),e}static \u0275fac=function(i){return new(i||o)};static \u0275cmp=C({type:o,selectors:[["mat-menu"]],contentQueries:function(i,n,r){if(i&1&&(Mt(r,lo,5),Mt(r,ot,5),Mt(r,ot,4)),i&2){let s;N(s=B())&&(n.lazyContent=s.first),N(s=B())&&(n._allItems=s),N(s=B())&&(n.items=s)}},viewQuery:function(i,n){if(i&1&&H(vt,5),i&2){let r;N(r=B())&&(n.templateRef=r.first)}},hostVars:3,hostBindings:function(i,n){i&2&&O("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},inputs:{backdropClass:"backdropClass",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],ariaDescribedby:[0,"aria-describedby","ariaDescribedby"],xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:[2,"overlapTrigger","overlapTrigger",K],hasBackdrop:[2,"hasBackdrop","hasBackdrop",e=>e==null?null:K(e)],panelClass:[0,"class","panelClass"],classList:"classList"},outputs:{closed:"closed",close:"close"},exportAs:["matMenu"],features:[Dt([{provide:Si,useExisting:o}])],ngContentSelectors:ao,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-mdc-menu-panel",3,"click","animationstart","animationend","animationcancel","id"],[1,"mat-mdc-menu-content"]],template:function(i,n){i&1&&(Te(),I(0,co,3,12,"ng-template"))},styles:[`mat-menu{display:none}.mat-mdc-menu-content{margin:0;padding:8px 0;outline:0}.mat-mdc-menu-content,.mat-mdc-menu-content .mat-mdc-menu-item .mat-mdc-menu-item-text{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;flex:1;white-space:normal;font-family:var(--mat-menu-item-label-text-font, var(--mat-sys-label-large-font));line-height:var(--mat-menu-item-label-text-line-height, var(--mat-sys-label-large-line-height));font-size:var(--mat-menu-item-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-menu-item-label-text-tracking, var(--mat-sys-label-large-tracking));font-weight:var(--mat-menu-item-label-text-weight, var(--mat-sys-label-large-weight))}@keyframes _mat-menu-enter{from{opacity:0;transform:scale(0.8)}to{opacity:1;transform:none}}@keyframes _mat-menu-exit{from{opacity:1}to{opacity:0}}.mat-mdc-menu-panel{min-width:112px;max-width:280px;overflow:auto;box-sizing:border-box;outline:0;animation:_mat-menu-enter 120ms cubic-bezier(0, 0, 0.2, 1);border-radius:var(--mat-menu-container-shape, var(--mat-sys-corner-extra-small));background-color:var(--mat-menu-container-color, var(--mat-sys-surface-container));box-shadow:var(--mat-menu-container-elevation-shadow, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12));will-change:transform,opacity}.mat-mdc-menu-panel.mat-menu-panel-exit-animation{animation:_mat-menu-exit 100ms 25ms linear forwards}.mat-mdc-menu-panel.mat-menu-panel-animations-disabled{animation:none}.mat-mdc-menu-panel.mat-menu-panel-animating{pointer-events:none}.mat-mdc-menu-panel.mat-menu-panel-animating:has(.mat-mdc-menu-content:empty){display:none}@media(forced-colors: active){.mat-mdc-menu-panel{outline:solid 1px}}.mat-mdc-menu-panel .mat-divider{color:var(--mat-menu-divider-color, var(--mat-sys-surface-variant));margin-bottom:var(--mat-menu-divider-bottom-spacing, 8px);margin-top:var(--mat-menu-divider-top-spacing, 8px)}.mat-mdc-menu-item{display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;padding:0;cursor:pointer;width:100%;text-align:left;box-sizing:border-box;color:inherit;font-size:inherit;background:none;text-decoration:none;margin:0;min-height:48px;padding-left:var(--mat-menu-item-leading-spacing, 12px);padding-right:var(--mat-menu-item-trailing-spacing, 12px);-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-menu-item::-moz-focus-inner{border:0}[dir=rtl] .mat-mdc-menu-item{padding-left:var(--mat-menu-item-trailing-spacing, 12px);padding-right:var(--mat-menu-item-leading-spacing, 12px)}.mat-mdc-menu-item:has(.material-icons,mat-icon,[matButtonIcon]){padding-left:var(--mat-menu-item-with-icon-leading-spacing, 12px);padding-right:var(--mat-menu-item-with-icon-trailing-spacing, 12px)}[dir=rtl] .mat-mdc-menu-item:has(.material-icons,mat-icon,[matButtonIcon]){padding-left:var(--mat-menu-item-with-icon-trailing-spacing, 12px);padding-right:var(--mat-menu-item-with-icon-leading-spacing, 12px)}.mat-mdc-menu-item,.mat-mdc-menu-item:visited,.mat-mdc-menu-item:link{color:var(--mat-menu-item-label-text-color, var(--mat-sys-on-surface))}.mat-mdc-menu-item .mat-icon-no-color,.mat-mdc-menu-item .mat-mdc-menu-submenu-icon{color:var(--mat-menu-item-icon-color, var(--mat-sys-on-surface-variant))}.mat-mdc-menu-item[disabled]{cursor:default;opacity:.38}.mat-mdc-menu-item[disabled]::after{display:block;position:absolute;content:"";top:0;left:0;bottom:0;right:0}.mat-mdc-menu-item:focus{outline:0}.mat-mdc-menu-item .mat-icon{flex-shrink:0;margin-right:var(--mat-menu-item-spacing, 12px);height:var(--mat-menu-item-icon-size, 24px);width:var(--mat-menu-item-icon-size, 24px)}[dir=rtl] .mat-mdc-menu-item{text-align:right}[dir=rtl] .mat-mdc-menu-item .mat-icon{margin-right:0;margin-left:var(--mat-menu-item-spacing, 12px)}.mat-mdc-menu-item:not([disabled]):hover{background-color:var(--mat-menu-item-hover-state-layer-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-hover-state-layer-opacity) * 100%), transparent))}.mat-mdc-menu-item:not([disabled]).cdk-program-focused,.mat-mdc-menu-item:not([disabled]).cdk-keyboard-focused,.mat-mdc-menu-item:not([disabled]).mat-mdc-menu-item-highlighted{background-color:var(--mat-menu-item-focus-state-layer-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-focus-state-layer-opacity) * 100%), transparent))}@media(forced-colors: active){.mat-mdc-menu-item{margin-top:1px}}.mat-mdc-menu-submenu-icon{width:var(--mat-menu-item-icon-size, 24px);height:10px;fill:currentColor;padding-left:var(--mat-menu-item-spacing, 12px)}[dir=rtl] .mat-mdc-menu-submenu-icon{padding-right:var(--mat-menu-item-spacing, 12px);padding-left:0}[dir=rtl] .mat-mdc-menu-submenu-icon polygon{transform:scaleX(-1);transform-origin:center}@media(forced-colors: active){.mat-mdc-menu-submenu-icon{fill:CanvasText}}.mat-mdc-menu-item .mat-mdc-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}
`],encapsulation:2,changeDetection:0})}return o})(),Sn=new P("mat-menu-scroll-strategy",{providedIn:"root",factory:()=>{let o=l(ne);return()=>o.scrollStrategies.reposition()}});function uo(o){return()=>o.scrollStrategies.reposition()}var po={provide:Sn,deps:[ne],useFactory:uo},go={passive:!0};var nt=new WeakMap,kn=(()=>{class o{_overlay=l(ne);_element=l(G);_viewContainerRef=l(ji);_menuItemInstance=l(ot,{optional:!0,self:!0});_dir=l(tt,{optional:!0});_focusMonitor=l(De);_ngZone=l(Be);_scrollStrategy=l(Sn);_changeDetectorRef=l(be);_cleanupTouchstart;_portal;_overlayRef=null;_menuOpen=!1;_closingActionsSubscription=pt.EMPTY;_hoverSubscription=pt.EMPTY;_menuCloseSubscription=pt.EMPTY;_pendingRemoval;_parentMaterialMenu;_parentInnerPadding;_openedBy=void 0;get _deprecatedMatMenuTriggerFor(){return this.menu}set _deprecatedMatMenuTriggerFor(e){this.menu=e}get menu(){return this._menu}set menu(e){e!==this._menu&&(this._menu=e,this._menuCloseSubscription.unsubscribe(),e&&(this._parentMaterialMenu,this._menuCloseSubscription=e.close.subscribe(i=>{this._destroyMenu(i),(i==="click"||i==="tab")&&this._parentMaterialMenu&&this._parentMaterialMenu.closed.emit(i)})),this._menuItemInstance?._setTriggersSubmenu(this.triggersSubmenu()))}_menu;menuData;restoreFocus=!0;menuOpened=new le;onMenuOpen=this.menuOpened;menuClosed=new le;onMenuClose=this.menuClosed;constructor(){let e=l(Si,{optional:!0}),i=l(wt);this._parentMaterialMenu=e instanceof qe?e:void 0,this._cleanupTouchstart=nn(i,this._element.nativeElement,"touchstart",n=>{tn(n)||(this._openedBy="touch")},go)}ngAfterContentInit(){this._handleHover()}ngOnDestroy(){this.menu&&this._ownsMenu(this.menu)&&nt.delete(this.menu),this._cleanupTouchstart(),this._pendingRemoval?.unsubscribe(),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._hoverSubscription.unsubscribe(),this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null)}get menuOpen(){return this._menuOpen}get dir(){return this._dir&&this._dir.value==="rtl"?"rtl":"ltr"}triggersSubmenu(){return!!(this._menuItemInstance&&this._parentMaterialMenu&&this.menu)}toggleMenu(){return this._menuOpen?this.closeMenu():this.openMenu()}openMenu(){let e=this.menu;if(this._menuOpen||!e)return;this._pendingRemoval?.unsubscribe();let i=nt.get(e);nt.set(e,this),i&&i!==this&&i.closeMenu();let n=this._createOverlay(e),r=n.getConfig(),s=r.positionStrategy;this._setPosition(e,s),r.hasBackdrop=e.hasBackdrop==null?!this.triggersSubmenu():e.hasBackdrop,n.hasAttached()||(n.attach(this._getPortal(e)),e.lazyContent?.attach(this.menuData)),this._closingActionsSubscription=this._menuClosingActions().subscribe(()=>this.closeMenu()),e.parentMenu=this.triggersSubmenu()?this._parentMaterialMenu:void 0,e.direction=this.dir,e.focusFirstItem(this._openedBy||"program"),this._setIsMenuOpen(!0),e instanceof qe&&(e._setIsOpen(!0),e._directDescendantItems.changes.pipe(Ai(e.close)).subscribe(()=>{s.withLockedPosition(!1).reapplyLastPosition(),s.withLockedPosition(!0)}))}closeMenu(){this.menu?.close.emit()}focus(e,i){this._focusMonitor&&e?this._focusMonitor.focusVia(this._element,e,i):this._element.nativeElement.focus(i)}updatePosition(){this._overlayRef?.updatePosition()}_destroyMenu(e){let i=this._overlayRef,n=this._menu;!i||!this.menuOpen||(this._closingActionsSubscription.unsubscribe(),this._pendingRemoval?.unsubscribe(),n instanceof qe&&this._ownsMenu(n)?(this._pendingRemoval=n._animationDone.pipe(W(1)).subscribe(()=>{i.detach(),n.lazyContent?.detach()}),n._setIsOpen(!1)):(i.detach(),n?.lazyContent?.detach()),n&&this._ownsMenu(n)&&nt.delete(n),this.restoreFocus&&(e==="keydown"||!this._openedBy||!this.triggersSubmenu())&&this.focus(this._openedBy),this._openedBy=void 0,this._setIsMenuOpen(!1))}_setIsMenuOpen(e){e!==this._menuOpen&&(this._menuOpen=e,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this.triggersSubmenu()&&this._menuItemInstance._setHighlighted(e),this._changeDetectorRef.markForCheck())}_createOverlay(e){if(!this._overlayRef){let i=this._getOverlayConfig(e);this._subscribeToPositions(e,i.positionStrategy),this._overlayRef=this._overlay.create(i),this._overlayRef.keydownEvents().subscribe(n=>{this.menu instanceof qe&&this.menu._handleKeydown(n)})}return this._overlayRef}_getOverlayConfig(e){return new Nt({positionStrategy:this._overlay.position().flexibleConnectedTo(this._element).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:e.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:e.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir||"ltr"})}_subscribeToPositions(e,i){e.setPositionClasses&&i.positionChanges.subscribe(n=>{this._ngZone.run(()=>{let r=n.connectionPair.overlayX==="start"?"after":"before",s=n.connectionPair.overlayY==="top"?"below":"above";e.setPositionClasses(r,s)})})}_setPosition(e,i){let[n,r]=e.xPosition==="before"?["end","start"]:["start","end"],[s,c]=e.yPosition==="above"?["bottom","top"]:["top","bottom"],[d,u]=[s,c],[_,q]=[n,r],de=0;if(this.triggersSubmenu()){if(q=n=e.xPosition==="before"?"start":"end",r=_=n==="end"?"start":"end",this._parentMaterialMenu){if(this._parentInnerPadding==null){let Ri=this._parentMaterialMenu.items.first;this._parentInnerPadding=Ri?Ri._getHostElement().offsetTop:0}de=s==="bottom"?this._parentInnerPadding:-this._parentInnerPadding}}else e.overlapTrigger||(d=s==="top"?"bottom":"top",u=c==="top"?"bottom":"top");i.withPositions([{originX:n,originY:d,overlayX:_,overlayY:s,offsetY:de},{originX:r,originY:d,overlayX:q,overlayY:s,offsetY:de},{originX:n,originY:u,overlayX:_,overlayY:c,offsetY:-de},{originX:r,originY:u,overlayX:q,overlayY:c,offsetY:-de}])}_menuClosingActions(){let e=this._overlayRef.backdropClick(),i=this._overlayRef.detachments(),n=this._parentMaterialMenu?this._parentMaterialMenu.closed:Je(),r=this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe(te(s=>this._menuOpen&&s!==this._menuItemInstance)):Je();return Le(e,n,r,i)}_handleMousedown(e){en(e)||(this._openedBy=e.button===0?"mouse":void 0,this.triggersSubmenu()&&e.preventDefault())}_handleKeydown(e){let i=e.keyCode;(i===13||i===32)&&(this._openedBy="keyboard"),this.triggersSubmenu()&&(i===39&&this.dir==="ltr"||i===37&&this.dir==="rtl")&&(this._openedBy="keyboard",this.openMenu())}_handleClick(e){this.triggersSubmenu()?(e.stopPropagation(),this.openMenu()):this.toggleMenu()}_handleHover(){this.triggersSubmenu()&&this._parentMaterialMenu&&(this._hoverSubscription=this._parentMaterialMenu._hovered().subscribe(e=>{e===this._menuItemInstance&&!e.disabled&&(this._openedBy="mouse",this.openMenu())}))}_getPortal(e){return(!this._portal||this._portal.templateRef!==e.templateRef)&&(this._portal=new Ft(e.templateRef,this._viewContainerRef)),this._portal}_ownsMenu(e){return nt.get(e)===this}static \u0275fac=function(i){return new(i||o)};static \u0275dir=yt({type:o,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:[1,"mat-mdc-menu-trigger"],hostVars:3,hostBindings:function(i,n){i&1&&D("click",function(s){return n._handleClick(s)})("mousedown",function(s){return n._handleMousedown(s)})("keydown",function(s){return n._handleKeydown(s)}),i&2&&O("aria-haspopup",n.menu?"menu":null)("aria-expanded",n.menuOpen)("aria-controls",n.menuOpen?n.menu.panelId:null)},inputs:{_deprecatedMatMenuTriggerFor:[0,"mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:[0,"matMenuTriggerFor","menu"],menuData:[0,"matMenuTriggerData","menuData"],restoreFocus:[0,"matMenuTriggerRestoreFocus","restoreFocus"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"},exportAs:["matMenuTrigger"]})}return o})(),xn=(()=>{class o{static \u0275fac=function(i){return new(i||o)};static \u0275mod=fe({type:o});static \u0275inj=ue({providers:[po],imports:[ln,ze,Bt,mn,ze]})}return o})(),In={transformMenu:{type:7,name:"transformMenu",definitions:[{type:0,name:"void",styles:{type:6,styles:{opacity:0,transform:"scale(0.8)"},offset:null}},{type:1,expr:"void => enter",animation:{type:4,styles:{type:6,styles:{opacity:1,transform:"scale(1)"},offset:null},timings:"120ms cubic-bezier(0, 0, 0.2, 1)"},options:null},{type:1,expr:"* => void",animation:{type:4,styles:{type:6,styles:{opacity:0},offset:null},timings:"100ms 25ms linear"},options:null}],options:{}},fadeInItems:{type:7,name:"fadeInItems",definitions:[{type:0,name:"showing",styles:{type:6,styles:{opacity:1},offset:null}},{type:1,expr:"void => *",animation:[{type:6,styles:{opacity:0},offset:null},{type:4,styles:null,timings:"400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)"}],options:null}],options:{}}},ts=In.fadeInItems,is=In.transformMenu;var Q=class extends Error{constructor(t,e){let i=new.target.prototype;super(`${t}: Status code '${e}'`),this.statusCode=e,this.__proto__=i}},Ce=class extends Error{constructor(t="A timeout occurred."){let e=new.target.prototype;super(t),this.__proto__=e}},j=class extends Error{constructor(t="An abort occurred."){let e=new.target.prototype;super(t),this.__proto__=e}},Ut=class extends Error{constructor(t,e){let i=new.target.prototype;super(t),this.transport=e,this.errorType="UnsupportedTransportError",this.__proto__=i}},Ht=class extends Error{constructor(t,e){let i=new.target.prototype;super(t),this.transport=e,this.errorType="DisabledTransportError",this.__proto__=i}},$t=class extends Error{constructor(t,e){let i=new.target.prototype;super(t),this.transport=e,this.errorType="FailedToStartTransportError",this.__proto__=i}},rt=class extends Error{constructor(t){let e=new.target.prototype;super(t),this.errorType="FailedToNegotiateWithServerError",this.__proto__=e}},Wt=class extends Error{constructor(t,e){let i=new.target.prototype;super(t),this.innerErrors=e,this.__proto__=i}};var Ge=class{constructor(t,e,i){this.statusCode=t,this.statusText=e,this.content=i}},oe=class{get(t,e){return this.send(ee(v({},e),{method:"GET",url:t}))}post(t,e){return this.send(ee(v({},e),{method:"POST",url:t}))}delete(t,e){return this.send(ee(v({},e),{method:"DELETE",url:t}))}getCookieString(t){return""}};var a=function(o){return o[o.Trace=0]="Trace",o[o.Debug=1]="Debug",o[o.Information=2]="Information",o[o.Warning=3]="Warning",o[o.Error=4]="Error",o[o.Critical=5]="Critical",o[o.None=6]="None",o}(a||{});var re=class{constructor(){}log(t,e){}};re.instance=new re;var Tn="9.0.6";var S=class{static isRequired(t,e){if(t==null)throw new Error(`The '${e}' argument is required.`)}static isNotEmpty(t,e){if(!t||t.match(/^\s*$/))throw new Error(`The '${e}' argument should not be empty.`)}static isIn(t,e,i){if(!(t in e))throw new Error(`Unknown ${i} value: ${t}.`)}},k=class o{static get isBrowser(){return!o.isNode&&typeof window=="object"&&typeof window.document=="object"}static get isWebWorker(){return!o.isNode&&typeof self=="object"&&"importScripts"in self}static get isReactNative(){return!o.isNode&&typeof window=="object"&&typeof window.document>"u"}static get isNode(){return typeof process<"u"&&process.release&&process.release.name==="node"}};function Se(o,t){let e="";return Z(o)?(e=`Binary data of length ${o.byteLength}`,t&&(e+=`. Content: '${_o(o)}'`)):typeof o=="string"&&(e=`String data of length ${o.length}`,t&&(e+=`. Content: '${o}'`)),e}function _o(o){let t=new Uint8Array(o),e="";return t.forEach(i=>{let n=i<16?"0":"";e+=`0x${n}${i.toString(16)} `}),e.substr(0,e.length-1)}function Z(o){return o&&typeof ArrayBuffer<"u"&&(o instanceof ArrayBuffer||o.constructor&&o.constructor.name==="ArrayBuffer")}function qt(o,t,e,i,n,r){return g(this,null,function*(){let s={},[c,d]=se();s[c]=d,o.log(a.Trace,`(${t} transport) sending data. ${Se(n,r.logMessageContent)}.`);let u=Z(n)?"arraybuffer":"text",_=yield e.post(i,{content:n,headers:v(v({},s),r.headers),responseType:u,timeout:r.timeout,withCredentials:r.withCredentials});o.log(a.Trace,`(${t} transport) request complete. Response status: ${_.statusCode}.`)})}function Mn(o){return o===void 0?new Ee(a.Information):o===null?re.instance:o.log!==void 0?o:new Ee(o)}var zt=class{constructor(t,e){this._subject=t,this._observer=e}dispose(){let t=this._subject.observers.indexOf(this._observer);t>-1&&this._subject.observers.splice(t,1),this._subject.observers.length===0&&this._subject.cancelCallback&&this._subject.cancelCallback().catch(e=>{})}},Ee=class{constructor(t){this._minLevel=t,this.out=console}log(t,e){if(t>=this._minLevel){let i=`[${new Date().toISOString()}] ${a[t]}: ${e}`;switch(t){case a.Critical:case a.Error:this.out.error(i);break;case a.Warning:this.out.warn(i);break;case a.Information:this.out.info(i);break;default:this.out.log(i);break}}}};function se(){let o="X-SignalR-User-Agent";return k.isNode&&(o="User-Agent"),[o,bo(Tn,vo(),yo(),wo())]}function bo(o,t,e,i){let n="Microsoft SignalR/",r=o.split(".");return n+=`${r[0]}.${r[1]}`,n+=` (${o}; `,t&&t!==""?n+=`${t}; `:n+="Unknown OS; ",n+=`${e}`,i?n+=`; ${i}`:n+="; Unknown Runtime Version",n+=")",n}function vo(){if(k.isNode)switch(process.platform){case"win32":return"Windows NT";case"darwin":return"macOS";case"linux":return"Linux";default:return process.platform}else return""}function wo(){if(k.isNode)return process.versions.node}function yo(){return k.isNode?"NodeJS":"Browser"}function Gt(o){return o.stack?o.stack:o.message?o.message:`${o}`}function Dn(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("could not find global")}var Qt=class extends oe{constructor(t){if(super(),this._logger=t,typeof fetch>"u"||k.isNode){let e=typeof __webpack_require__=="function"?__non_webpack_require__:Oe;this._jar=new(e("tough-cookie")).CookieJar,typeof fetch>"u"?this._fetchType=e("node-fetch"):this._fetchType=fetch,this._fetchType=e("fetch-cookie")(this._fetchType,this._jar)}else this._fetchType=fetch.bind(Dn());if(typeof AbortController>"u"){let e=typeof __webpack_require__=="function"?__non_webpack_require__:Oe;this._abortControllerType=e("abort-controller")}else this._abortControllerType=AbortController}send(t){return g(this,null,function*(){if(t.abortSignal&&t.abortSignal.aborted)throw new j;if(!t.method)throw new Error("No method defined.");if(!t.url)throw new Error("No url defined.");let e=new this._abortControllerType,i;t.abortSignal&&(t.abortSignal.onabort=()=>{e.abort(),i=new j});let n=null;if(t.timeout){let d=t.timeout;n=setTimeout(()=>{e.abort(),this._logger.log(a.Warning,"Timeout from HTTP request."),i=new Ce},d)}t.content===""&&(t.content=void 0),t.content&&(t.headers=t.headers||{},Z(t.content)?t.headers["Content-Type"]="application/octet-stream":t.headers["Content-Type"]="text/plain;charset=UTF-8");let r;try{r=yield this._fetchType(t.url,{body:t.content,cache:"no-cache",credentials:t.withCredentials===!0?"include":"same-origin",headers:v({"X-Requested-With":"XMLHttpRequest"},t.headers),method:t.method,mode:"cors",redirect:"follow",signal:e.signal})}catch(d){throw i||(this._logger.log(a.Warning,`Error from HTTP request. ${d}.`),d)}finally{n&&clearTimeout(n),t.abortSignal&&(t.abortSignal.onabort=null)}if(!r.ok){let d=yield En(r,"text");throw new Q(d||r.statusText,r.status)}let c=yield En(r,t.responseType);return new Ge(r.status,r.statusText,c)})}getCookieString(t){let e="";return k.isNode&&this._jar&&this._jar.getCookies(t,(i,n)=>e=n.join("; ")),e}};function En(o,t){let e;switch(t){case"arraybuffer":e=o.arrayBuffer();break;case"text":e=o.text();break;case"blob":case"document":case"json":throw new Error(`${t} is not supported.`);default:e=o.text();break}return e}var Yt=class extends oe{constructor(t){super(),this._logger=t}send(t){return t.abortSignal&&t.abortSignal.aborted?Promise.reject(new j):t.method?t.url?new Promise((e,i)=>{let n=new XMLHttpRequest;n.open(t.method,t.url,!0),n.withCredentials=t.withCredentials===void 0?!0:t.withCredentials,n.setRequestHeader("X-Requested-With","XMLHttpRequest"),t.content===""&&(t.content=void 0),t.content&&(Z(t.content)?n.setRequestHeader("Content-Type","application/octet-stream"):n.setRequestHeader("Content-Type","text/plain;charset=UTF-8"));let r=t.headers;r&&Object.keys(r).forEach(s=>{n.setRequestHeader(s,r[s])}),t.responseType&&(n.responseType=t.responseType),t.abortSignal&&(t.abortSignal.onabort=()=>{n.abort(),i(new j)}),t.timeout&&(n.timeout=t.timeout),n.onload=()=>{t.abortSignal&&(t.abortSignal.onabort=null),n.status>=200&&n.status<300?e(new Ge(n.status,n.statusText,n.response||n.responseText)):i(new Q(n.response||n.responseText||n.statusText,n.status))},n.onerror=()=>{this._logger.log(a.Warning,`Error from HTTP request. ${n.status}: ${n.statusText}.`),i(new Q(n.statusText,n.status))},n.ontimeout=()=>{this._logger.log(a.Warning,"Timeout from HTTP request."),i(new Ce)},n.send(t.content)}):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}};var Xt=class extends oe{constructor(t){if(super(),typeof fetch<"u"||k.isNode)this._httpClient=new Qt(t);else if(typeof XMLHttpRequest<"u")this._httpClient=new Yt(t);else throw new Error("No usable HttpClient found.")}send(t){return t.abortSignal&&t.abortSignal.aborted?Promise.reject(new j):t.method?t.url?this._httpClient.send(t):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}getCookieString(t){return this._httpClient.getCookieString(t)}};var Y=class o{static write(t){return`${t}${o.RecordSeparator}`}static parse(t){if(t[t.length-1]!==o.RecordSeparator)throw new Error("Message is incomplete.");let e=t.split(o.RecordSeparator);return e.pop(),e}};Y.RecordSeparatorCode=30;Y.RecordSeparator=String.fromCharCode(Y.RecordSeparatorCode);var Kt=class{writeHandshakeRequest(t){return Y.write(JSON.stringify(t))}parseHandshakeResponse(t){let e,i;if(Z(t)){let c=new Uint8Array(t),d=c.indexOf(Y.RecordSeparatorCode);if(d===-1)throw new Error("Message is incomplete.");let u=d+1;e=String.fromCharCode.apply(null,Array.prototype.slice.call(c.slice(0,u))),i=c.byteLength>u?c.slice(u).buffer:null}else{let c=t,d=c.indexOf(Y.RecordSeparator);if(d===-1)throw new Error("Message is incomplete.");let u=d+1;e=c.substring(0,u),i=c.length>u?c.substring(u):null}let n=Y.parse(e),r=JSON.parse(n[0]);if(r.type)throw new Error("Expected a handshake response from the server.");return[i,r]}};var f=function(o){return o[o.Invocation=1]="Invocation",o[o.StreamItem=2]="StreamItem",o[o.Completion=3]="Completion",o[o.StreamInvocation=4]="StreamInvocation",o[o.CancelInvocation=5]="CancelInvocation",o[o.Ping=6]="Ping",o[o.Close=7]="Close",o[o.Ack=8]="Ack",o[o.Sequence=9]="Sequence",o}(f||{});var Jt=class{constructor(){this.observers=[]}next(t){for(let e of this.observers)e.next(t)}error(t){for(let e of this.observers)e.error&&e.error(t)}complete(){for(let t of this.observers)t.complete&&t.complete()}subscribe(t){return this.observers.push(t),new zt(this,t)}};var Zt=class{constructor(t,e,i){this._bufferSize=1e5,this._messages=[],this._totalMessageCount=0,this._waitForSequenceMessage=!1,this._nextReceivingSequenceId=1,this._latestReceivedSequenceId=0,this._bufferedByteCount=0,this._reconnectInProgress=!1,this._protocol=t,this._connection=e,this._bufferSize=i}_send(t){return g(this,null,function*(){let e=this._protocol.writeMessage(t),i=Promise.resolve();if(this._isInvocationMessage(t)){this._totalMessageCount++;let n=()=>{},r=()=>{};Z(e)?this._bufferedByteCount+=e.byteLength:this._bufferedByteCount+=e.length,this._bufferedByteCount>=this._bufferSize&&(i=new Promise((s,c)=>{n=s,r=c})),this._messages.push(new ki(e,this._totalMessageCount,n,r))}try{this._reconnectInProgress||(yield this._connection.send(e))}catch{this._disconnected()}yield i})}_ack(t){let e=-1;for(let i=0;i<this._messages.length;i++){let n=this._messages[i];if(n._id<=t.sequenceId)e=i,Z(n._message)?this._bufferedByteCount-=n._message.byteLength:this._bufferedByteCount-=n._message.length,n._resolver();else if(this._bufferedByteCount<this._bufferSize)n._resolver();else break}e!==-1&&(this._messages=this._messages.slice(e+1))}_shouldProcessMessage(t){if(this._waitForSequenceMessage)return t.type!==f.Sequence?!1:(this._waitForSequenceMessage=!1,!0);if(!this._isInvocationMessage(t))return!0;let e=this._nextReceivingSequenceId;return this._nextReceivingSequenceId++,e<=this._latestReceivedSequenceId?(e===this._latestReceivedSequenceId&&this._ackTimer(),!1):(this._latestReceivedSequenceId=e,this._ackTimer(),!0)}_resetSequence(t){if(t.sequenceId>this._nextReceivingSequenceId){this._connection.stop(new Error("Sequence ID greater than amount of messages we've received."));return}this._nextReceivingSequenceId=t.sequenceId}_disconnected(){this._reconnectInProgress=!0,this._waitForSequenceMessage=!0}_resend(){return g(this,null,function*(){let t=this._messages.length!==0?this._messages[0]._id:this._totalMessageCount+1;yield this._connection.send(this._protocol.writeMessage({type:f.Sequence,sequenceId:t}));let e=this._messages;for(let i of e)yield this._connection.send(i._message);this._reconnectInProgress=!1})}_dispose(t){t??(t=new Error("Unable to reconnect to server."));for(let e of this._messages)e._rejector(t)}_isInvocationMessage(t){switch(t.type){case f.Invocation:case f.StreamItem:case f.Completion:case f.StreamInvocation:case f.CancelInvocation:return!0;case f.Close:case f.Sequence:case f.Ping:case f.Ack:return!1}}_ackTimer(){this._ackTimerHandle===void 0&&(this._ackTimerHandle=setTimeout(()=>g(this,null,function*(){try{this._reconnectInProgress||(yield this._connection.send(this._protocol.writeMessage({type:f.Ack,sequenceId:this._latestReceivedSequenceId})))}catch{}clearTimeout(this._ackTimerHandle),this._ackTimerHandle=void 0}),1e3))}},ki=class{constructor(t,e,i,n){this._message=t,this._id=e,this._resolver=i,this._rejector=n}};var Co=30*1e3,So=15*1e3,ko=1e5,x=function(o){return o.Disconnected="Disconnected",o.Connecting="Connecting",o.Connected="Connected",o.Disconnecting="Disconnecting",o.Reconnecting="Reconnecting",o}(x||{}),st=class o{static create(t,e,i,n,r,s,c){return new o(t,e,i,n,r,s,c)}constructor(t,e,i,n,r,s,c){this._nextKeepAlive=0,this._freezeEventListener=()=>{this._logger.log(a.Warning,"The page is being frozen, this will likely lead to the connection being closed and messages being lost. For more information see the docs at https://learn.microsoft.com/aspnet/core/signalr/javascript-client#bsleep")},S.isRequired(t,"connection"),S.isRequired(e,"logger"),S.isRequired(i,"protocol"),this.serverTimeoutInMilliseconds=r??Co,this.keepAliveIntervalInMilliseconds=s??So,this._statefulReconnectBufferSize=c??ko,this._logger=e,this._protocol=i,this.connection=t,this._reconnectPolicy=n,this._handshakeProtocol=new Kt,this.connection.onreceive=d=>this._processIncomingData(d),this.connection.onclose=d=>this._connectionClosed(d),this._callbacks={},this._methods={},this._closedCallbacks=[],this._reconnectingCallbacks=[],this._reconnectedCallbacks=[],this._invocationId=0,this._receivedHandshakeResponse=!1,this._connectionState=x.Disconnected,this._connectionStarted=!1,this._cachedPingMessage=this._protocol.writeMessage({type:f.Ping})}get state(){return this._connectionState}get connectionId(){return this.connection&&this.connection.connectionId||null}get baseUrl(){return this.connection.baseUrl||""}set baseUrl(t){if(this._connectionState!==x.Disconnected&&this._connectionState!==x.Reconnecting)throw new Error("The HubConnection must be in the Disconnected or Reconnecting state to change the url.");if(!t)throw new Error("The HubConnection url must be a valid url.");this.connection.baseUrl=t}start(){return this._startPromise=this._startWithStateTransitions(),this._startPromise}_startWithStateTransitions(){return g(this,null,function*(){if(this._connectionState!==x.Disconnected)return Promise.reject(new Error("Cannot start a HubConnection that is not in the 'Disconnected' state."));this._connectionState=x.Connecting,this._logger.log(a.Debug,"Starting HubConnection.");try{yield this._startInternal(),k.isBrowser&&window.document.addEventListener("freeze",this._freezeEventListener),this._connectionState=x.Connected,this._connectionStarted=!0,this._logger.log(a.Debug,"HubConnection connected successfully.")}catch(t){return this._connectionState=x.Disconnected,this._logger.log(a.Debug,`HubConnection failed to start successfully because of error '${t}'.`),Promise.reject(t)}})}_startInternal(){return g(this,null,function*(){this._stopDuringStartError=void 0,this._receivedHandshakeResponse=!1;let t=new Promise((e,i)=>{this._handshakeResolver=e,this._handshakeRejecter=i});yield this.connection.start(this._protocol.transferFormat);try{let e=this._protocol.version;this.connection.features.reconnect||(e=1);let i={protocol:this._protocol.name,version:e};if(this._logger.log(a.Debug,"Sending handshake request."),yield this._sendMessage(this._handshakeProtocol.writeHandshakeRequest(i)),this._logger.log(a.Information,`Using HubProtocol '${this._protocol.name}'.`),this._cleanupTimeout(),this._resetTimeoutPeriod(),this._resetKeepAliveInterval(),yield t,this._stopDuringStartError)throw this._stopDuringStartError;(this.connection.features.reconnect||!1)&&(this._messageBuffer=new Zt(this._protocol,this.connection,this._statefulReconnectBufferSize),this.connection.features.disconnected=this._messageBuffer._disconnected.bind(this._messageBuffer),this.connection.features.resend=()=>{if(this._messageBuffer)return this._messageBuffer._resend()}),this.connection.features.inherentKeepAlive||(yield this._sendMessage(this._cachedPingMessage))}catch(e){throw this._logger.log(a.Debug,`Hub handshake failed with error '${e}' during start(). Stopping HubConnection.`),this._cleanupTimeout(),this._cleanupPingTimer(),yield this.connection.stop(e),e}})}stop(){return g(this,null,function*(){let t=this._startPromise;this.connection.features.reconnect=!1,this._stopPromise=this._stopInternal(),yield this._stopPromise;try{yield t}catch{}})}_stopInternal(t){if(this._connectionState===x.Disconnected)return this._logger.log(a.Debug,`Call to HubConnection.stop(${t}) ignored because it is already in the disconnected state.`),Promise.resolve();if(this._connectionState===x.Disconnecting)return this._logger.log(a.Debug,`Call to HttpConnection.stop(${t}) ignored because the connection is already in the disconnecting state.`),this._stopPromise;let e=this._connectionState;return this._connectionState=x.Disconnecting,this._logger.log(a.Debug,"Stopping HubConnection."),this._reconnectDelayHandle?(this._logger.log(a.Debug,"Connection stopped during reconnect delay. Done reconnecting."),clearTimeout(this._reconnectDelayHandle),this._reconnectDelayHandle=void 0,this._completeClose(),Promise.resolve()):(e===x.Connected&&this._sendCloseMessage(),this._cleanupTimeout(),this._cleanupPingTimer(),this._stopDuringStartError=t||new j("The connection was stopped before the hub handshake could complete."),this.connection.stop(t))}_sendCloseMessage(){return g(this,null,function*(){try{yield this._sendWithProtocol(this._createCloseMessage())}catch{}})}stream(t,...e){let[i,n]=this._replaceStreamingParams(e),r=this._createStreamInvocation(t,e,n),s,c=new Jt;return c.cancelCallback=()=>{let d=this._createCancelInvocation(r.invocationId);return delete this._callbacks[r.invocationId],s.then(()=>this._sendWithProtocol(d))},this._callbacks[r.invocationId]=(d,u)=>{if(u){c.error(u);return}else d&&(d.type===f.Completion?d.error?c.error(new Error(d.error)):c.complete():c.next(d.item))},s=this._sendWithProtocol(r).catch(d=>{c.error(d),delete this._callbacks[r.invocationId]}),this._launchStreams(i,s),c}_sendMessage(t){return this._resetKeepAliveInterval(),this.connection.send(t)}_sendWithProtocol(t){return this._messageBuffer?this._messageBuffer._send(t):this._sendMessage(this._protocol.writeMessage(t))}send(t,...e){let[i,n]=this._replaceStreamingParams(e),r=this._sendWithProtocol(this._createInvocation(t,e,!0,n));return this._launchStreams(i,r),r}invoke(t,...e){let[i,n]=this._replaceStreamingParams(e),r=this._createInvocation(t,e,!1,n);return new Promise((c,d)=>{this._callbacks[r.invocationId]=(_,q)=>{if(q){d(q);return}else _&&(_.type===f.Completion?_.error?d(new Error(_.error)):c(_.result):d(new Error(`Unexpected message type: ${_.type}`)))};let u=this._sendWithProtocol(r).catch(_=>{d(_),delete this._callbacks[r.invocationId]});this._launchStreams(i,u)})}on(t,e){!t||!e||(t=t.toLowerCase(),this._methods[t]||(this._methods[t]=[]),this._methods[t].indexOf(e)===-1&&this._methods[t].push(e))}off(t,e){if(!t)return;t=t.toLowerCase();let i=this._methods[t];if(i)if(e){let n=i.indexOf(e);n!==-1&&(i.splice(n,1),i.length===0&&delete this._methods[t])}else delete this._methods[t]}onclose(t){t&&this._closedCallbacks.push(t)}onreconnecting(t){t&&this._reconnectingCallbacks.push(t)}onreconnected(t){t&&this._reconnectedCallbacks.push(t)}_processIncomingData(t){if(this._cleanupTimeout(),this._receivedHandshakeResponse||(t=this._processHandshakeResponse(t),this._receivedHandshakeResponse=!0),t){let e=this._protocol.parseMessages(t,this._logger);for(let i of e)if(!(this._messageBuffer&&!this._messageBuffer._shouldProcessMessage(i)))switch(i.type){case f.Invocation:this._invokeClientMethod(i).catch(n=>{this._logger.log(a.Error,`Invoke client method threw error: ${Gt(n)}`)});break;case f.StreamItem:case f.Completion:{let n=this._callbacks[i.invocationId];if(n){i.type===f.Completion&&delete this._callbacks[i.invocationId];try{n(i)}catch(r){this._logger.log(a.Error,`Stream callback threw error: ${Gt(r)}`)}}break}case f.Ping:break;case f.Close:{this._logger.log(a.Information,"Close message received from server.");let n=i.error?new Error("Server returned an error on close: "+i.error):void 0;i.allowReconnect===!0?this.connection.stop(n):this._stopPromise=this._stopInternal(n);break}case f.Ack:this._messageBuffer&&this._messageBuffer._ack(i);break;case f.Sequence:this._messageBuffer&&this._messageBuffer._resetSequence(i);break;default:this._logger.log(a.Warning,`Invalid message type: ${i.type}.`);break}}this._resetTimeoutPeriod()}_processHandshakeResponse(t){let e,i;try{[i,e]=this._handshakeProtocol.parseHandshakeResponse(t)}catch(n){let r="Error parsing handshake response: "+n;this._logger.log(a.Error,r);let s=new Error(r);throw this._handshakeRejecter(s),s}if(e.error){let n="Server returned handshake error: "+e.error;this._logger.log(a.Error,n);let r=new Error(n);throw this._handshakeRejecter(r),r}else this._logger.log(a.Debug,"Server handshake complete.");return this._handshakeResolver(),i}_resetKeepAliveInterval(){this.connection.features.inherentKeepAlive||(this._nextKeepAlive=new Date().getTime()+this.keepAliveIntervalInMilliseconds,this._cleanupPingTimer())}_resetTimeoutPeriod(){if((!this.connection.features||!this.connection.features.inherentKeepAlive)&&(this._timeoutHandle=setTimeout(()=>this.serverTimeout(),this.serverTimeoutInMilliseconds),this._pingServerHandle===void 0)){let t=this._nextKeepAlive-new Date().getTime();t<0&&(t=0),this._pingServerHandle=setTimeout(()=>g(this,null,function*(){if(this._connectionState===x.Connected)try{yield this._sendMessage(this._cachedPingMessage)}catch{this._cleanupPingTimer()}}),t)}}serverTimeout(){this.connection.stop(new Error("Server timeout elapsed without receiving a message from the server."))}_invokeClientMethod(t){return g(this,null,function*(){let e=t.target.toLowerCase(),i=this._methods[e];if(!i){this._logger.log(a.Warning,`No client method with the name '${e}' found.`),t.invocationId&&(this._logger.log(a.Warning,`No result given for '${e}' method and invocation ID '${t.invocationId}'.`),yield this._sendWithProtocol(this._createCompletionMessage(t.invocationId,"Client didn't provide a result.",null)));return}let n=i.slice(),r=!!t.invocationId,s,c,d;for(let u of n)try{let _=s;s=yield u.apply(this,t.arguments),r&&s&&_&&(this._logger.log(a.Error,`Multiple results provided for '${e}'. Sending error to server.`),d=this._createCompletionMessage(t.invocationId,"Client provided multiple results.",null)),c=void 0}catch(_){c=_,this._logger.log(a.Error,`A callback for the method '${e}' threw error '${_}'.`)}d?yield this._sendWithProtocol(d):r?(c?d=this._createCompletionMessage(t.invocationId,`${c}`,null):s!==void 0?d=this._createCompletionMessage(t.invocationId,null,s):(this._logger.log(a.Warning,`No result given for '${e}' method and invocation ID '${t.invocationId}'.`),d=this._createCompletionMessage(t.invocationId,"Client didn't provide a result.",null)),yield this._sendWithProtocol(d)):s&&this._logger.log(a.Error,`Result given for '${e}' method but server is not expecting a result.`)})}_connectionClosed(t){this._logger.log(a.Debug,`HubConnection.connectionClosed(${t}) called while in state ${this._connectionState}.`),this._stopDuringStartError=this._stopDuringStartError||t||new j("The underlying connection was closed before the hub handshake could complete."),this._handshakeResolver&&this._handshakeResolver(),this._cancelCallbacksWithError(t||new Error("Invocation canceled due to the underlying connection being closed.")),this._cleanupTimeout(),this._cleanupPingTimer(),this._connectionState===x.Disconnecting?this._completeClose(t):this._connectionState===x.Connected&&this._reconnectPolicy?this._reconnect(t):this._connectionState===x.Connected&&this._completeClose(t)}_completeClose(t){if(this._connectionStarted){this._connectionState=x.Disconnected,this._connectionStarted=!1,this._messageBuffer&&(this._messageBuffer._dispose(t??new Error("Connection closed.")),this._messageBuffer=void 0),k.isBrowser&&window.document.removeEventListener("freeze",this._freezeEventListener);try{this._closedCallbacks.forEach(e=>e.apply(this,[t]))}catch(e){this._logger.log(a.Error,`An onclose callback called with error '${t}' threw error '${e}'.`)}}}_reconnect(t){return g(this,null,function*(){let e=Date.now(),i=0,n=t!==void 0?t:new Error("Attempting to reconnect due to a unknown error."),r=this._getNextRetryDelay(i++,0,n);if(r===null){this._logger.log(a.Debug,"Connection not reconnecting because the IRetryPolicy returned null on the first reconnect attempt."),this._completeClose(t);return}if(this._connectionState=x.Reconnecting,t?this._logger.log(a.Information,`Connection reconnecting because of error '${t}'.`):this._logger.log(a.Information,"Connection reconnecting."),this._reconnectingCallbacks.length!==0){try{this._reconnectingCallbacks.forEach(s=>s.apply(this,[t]))}catch(s){this._logger.log(a.Error,`An onreconnecting callback called with error '${t}' threw error '${s}'.`)}if(this._connectionState!==x.Reconnecting){this._logger.log(a.Debug,"Connection left the reconnecting state in onreconnecting callback. Done reconnecting.");return}}for(;r!==null;){if(this._logger.log(a.Information,`Reconnect attempt number ${i} will start in ${r} ms.`),yield new Promise(s=>{this._reconnectDelayHandle=setTimeout(s,r)}),this._reconnectDelayHandle=void 0,this._connectionState!==x.Reconnecting){this._logger.log(a.Debug,"Connection left the reconnecting state during reconnect delay. Done reconnecting.");return}try{if(yield this._startInternal(),this._connectionState=x.Connected,this._logger.log(a.Information,"HubConnection reconnected successfully."),this._reconnectedCallbacks.length!==0)try{this._reconnectedCallbacks.forEach(s=>s.apply(this,[this.connection.connectionId]))}catch(s){this._logger.log(a.Error,`An onreconnected callback called with connectionId '${this.connection.connectionId}; threw error '${s}'.`)}return}catch(s){if(this._logger.log(a.Information,`Reconnect attempt failed because of error '${s}'.`),this._connectionState!==x.Reconnecting){this._logger.log(a.Debug,`Connection moved to the '${this._connectionState}' from the reconnecting state during reconnect attempt. Done reconnecting.`),this._connectionState===x.Disconnecting&&this._completeClose();return}n=s instanceof Error?s:new Error(s.toString()),r=this._getNextRetryDelay(i++,Date.now()-e,n)}}this._logger.log(a.Information,`Reconnect retries have been exhausted after ${Date.now()-e} ms and ${i} failed attempts. Connection disconnecting.`),this._completeClose()})}_getNextRetryDelay(t,e,i){try{return this._reconnectPolicy.nextRetryDelayInMilliseconds({elapsedMilliseconds:e,previousRetryCount:t,retryReason:i})}catch(n){return this._logger.log(a.Error,`IRetryPolicy.nextRetryDelayInMilliseconds(${t}, ${e}) threw error '${n}'.`),null}}_cancelCallbacksWithError(t){let e=this._callbacks;this._callbacks={},Object.keys(e).forEach(i=>{let n=e[i];try{n(null,t)}catch(r){this._logger.log(a.Error,`Stream 'error' callback called with '${t}' threw error: ${Gt(r)}`)}})}_cleanupPingTimer(){this._pingServerHandle&&(clearTimeout(this._pingServerHandle),this._pingServerHandle=void 0)}_cleanupTimeout(){this._timeoutHandle&&clearTimeout(this._timeoutHandle)}_createInvocation(t,e,i,n){if(i)return n.length!==0?{target:t,arguments:e,streamIds:n,type:f.Invocation}:{target:t,arguments:e,type:f.Invocation};{let r=this._invocationId;return this._invocationId++,n.length!==0?{target:t,arguments:e,invocationId:r.toString(),streamIds:n,type:f.Invocation}:{target:t,arguments:e,invocationId:r.toString(),type:f.Invocation}}}_launchStreams(t,e){if(t.length!==0){e||(e=Promise.resolve());for(let i in t)t[i].subscribe({complete:()=>{e=e.then(()=>this._sendWithProtocol(this._createCompletionMessage(i)))},error:n=>{let r;n instanceof Error?r=n.message:n&&n.toString?r=n.toString():r="Unknown error",e=e.then(()=>this._sendWithProtocol(this._createCompletionMessage(i,r)))},next:n=>{e=e.then(()=>this._sendWithProtocol(this._createStreamItemMessage(i,n)))}})}}_replaceStreamingParams(t){let e=[],i=[];for(let n=0;n<t.length;n++){let r=t[n];if(this._isObservable(r)){let s=this._invocationId;this._invocationId++,e[s]=r,i.push(s.toString()),t.splice(n,1)}}return[e,i]}_isObservable(t){return t&&t.subscribe&&typeof t.subscribe=="function"}_createStreamInvocation(t,e,i){let n=this._invocationId;return this._invocationId++,i.length!==0?{target:t,arguments:e,invocationId:n.toString(),streamIds:i,type:f.StreamInvocation}:{target:t,arguments:e,invocationId:n.toString(),type:f.StreamInvocation}}_createCancelInvocation(t){return{invocationId:t,type:f.CancelInvocation}}_createStreamItemMessage(t,e){return{invocationId:t,item:e,type:f.StreamItem}}_createCompletionMessage(t,e,i){return e?{error:e,invocationId:t,type:f.Completion}:{invocationId:t,result:i,type:f.Completion}}_createCloseMessage(){return{type:f.Close}}};var xo=[0,2e3,1e4,3e4,null],at=class{constructor(t){this._retryDelays=t!==void 0?[...t,null]:xo}nextRetryDelayInMilliseconds(t){return this._retryDelays[t.previousRetryCount]}};var Re=(()=>{class o{}return o.Authorization="Authorization",o.Cookie="Cookie",o})();var ei=class extends oe{constructor(t,e){super(),this._innerClient=t,this._accessTokenFactory=e}send(t){return g(this,null,function*(){let e=!0;this._accessTokenFactory&&(!this._accessToken||t.url&&t.url.indexOf("/negotiate?")>0)&&(e=!1,this._accessToken=yield this._accessTokenFactory()),this._setAuthorizationHeader(t);let i=yield this._innerClient.send(t);return e&&i.statusCode===401&&this._accessTokenFactory?(this._accessToken=yield this._accessTokenFactory(),this._setAuthorizationHeader(t),yield this._innerClient.send(t)):i})}_setAuthorizationHeader(t){t.headers||(t.headers={}),this._accessToken?t.headers[Re.Authorization]=`Bearer ${this._accessToken}`:this._accessTokenFactory&&t.headers[Re.Authorization]&&delete t.headers[Re.Authorization]}getCookieString(t){return this._innerClient.getCookieString(t)}};var L=function(o){return o[o.None=0]="None",o[o.WebSockets=1]="WebSockets",o[o.ServerSentEvents=2]="ServerSentEvents",o[o.LongPolling=4]="LongPolling",o}(L||{}),A=function(o){return o[o.Text=1]="Text",o[o.Binary=2]="Binary",o}(A||{});var ti=class{constructor(){this._isAborted=!1,this.onabort=null}abort(){this._isAborted||(this._isAborted=!0,this.onabort&&this.onabort())}get signal(){return this}get aborted(){return this._isAborted}};var ct=class{get pollAborted(){return this._pollAbort.aborted}constructor(t,e,i){this._httpClient=t,this._logger=e,this._pollAbort=new ti,this._options=i,this._running=!1,this.onreceive=null,this.onclose=null}connect(t,e){return g(this,null,function*(){if(S.isRequired(t,"url"),S.isRequired(e,"transferFormat"),S.isIn(e,A,"transferFormat"),this._url=t,this._logger.log(a.Trace,"(LongPolling transport) Connecting."),e===A.Binary&&typeof XMLHttpRequest<"u"&&typeof new XMLHttpRequest().responseType!="string")throw new Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");let[i,n]=se(),r=v({[i]:n},this._options.headers),s={abortSignal:this._pollAbort.signal,headers:r,timeout:1e5,withCredentials:this._options.withCredentials};e===A.Binary&&(s.responseType="arraybuffer");let c=`${t}&_=${Date.now()}`;this._logger.log(a.Trace,`(LongPolling transport) polling: ${c}.`);let d=yield this._httpClient.get(c,s);d.statusCode!==200?(this._logger.log(a.Error,`(LongPolling transport) Unexpected response code: ${d.statusCode}.`),this._closeError=new Q(d.statusText||"",d.statusCode),this._running=!1):this._running=!0,this._receiving=this._poll(this._url,s)})}_poll(t,e){return g(this,null,function*(){try{for(;this._running;)try{let i=`${t}&_=${Date.now()}`;this._logger.log(a.Trace,`(LongPolling transport) polling: ${i}.`);let n=yield this._httpClient.get(i,e);n.statusCode===204?(this._logger.log(a.Information,"(LongPolling transport) Poll terminated by server."),this._running=!1):n.statusCode!==200?(this._logger.log(a.Error,`(LongPolling transport) Unexpected response code: ${n.statusCode}.`),this._closeError=new Q(n.statusText||"",n.statusCode),this._running=!1):n.content?(this._logger.log(a.Trace,`(LongPolling transport) data received. ${Se(n.content,this._options.logMessageContent)}.`),this.onreceive&&this.onreceive(n.content)):this._logger.log(a.Trace,"(LongPolling transport) Poll timed out, reissuing.")}catch(i){this._running?i instanceof Ce?this._logger.log(a.Trace,"(LongPolling transport) Poll timed out, reissuing."):(this._closeError=i,this._running=!1):this._logger.log(a.Trace,`(LongPolling transport) Poll errored after shutdown: ${i.message}`)}}finally{this._logger.log(a.Trace,"(LongPolling transport) Polling complete."),this.pollAborted||this._raiseOnClose()}})}send(t){return g(this,null,function*(){return this._running?qt(this._logger,"LongPolling",this._httpClient,this._url,t,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))})}stop(){return g(this,null,function*(){this._logger.log(a.Trace,"(LongPolling transport) Stopping polling."),this._running=!1,this._pollAbort.abort();try{yield this._receiving,this._logger.log(a.Trace,`(LongPolling transport) sending DELETE request to ${this._url}.`);let t={},[e,i]=se();t[e]=i;let n={headers:v(v({},t),this._options.headers),timeout:this._options.timeout,withCredentials:this._options.withCredentials},r;try{yield this._httpClient.delete(this._url,n)}catch(s){r=s}r?r instanceof Q&&(r.statusCode===404?this._logger.log(a.Trace,"(LongPolling transport) A 404 response was returned from sending a DELETE request."):this._logger.log(a.Trace,`(LongPolling transport) Error sending a DELETE request: ${r}`)):this._logger.log(a.Trace,"(LongPolling transport) DELETE request accepted.")}finally{this._logger.log(a.Trace,"(LongPolling transport) Stop finished."),this._raiseOnClose()}})}_raiseOnClose(){if(this.onclose){let t="(LongPolling transport) Firing onclose event.";this._closeError&&(t+=" Error: "+this._closeError),this._logger.log(a.Trace,t),this.onclose(this._closeError)}}};var ii=class{constructor(t,e,i,n){this._httpClient=t,this._accessToken=e,this._logger=i,this._options=n,this.onreceive=null,this.onclose=null}connect(t,e){return g(this,null,function*(){return S.isRequired(t,"url"),S.isRequired(e,"transferFormat"),S.isIn(e,A,"transferFormat"),this._logger.log(a.Trace,"(SSE transport) Connecting."),this._url=t,this._accessToken&&(t+=(t.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(this._accessToken)}`),new Promise((i,n)=>{let r=!1;if(e!==A.Text){n(new Error("The Server-Sent Events transport only supports the 'Text' transfer format"));return}let s;if(k.isBrowser||k.isWebWorker)s=new this._options.EventSource(t,{withCredentials:this._options.withCredentials});else{let c=this._httpClient.getCookieString(t),d={};d.Cookie=c;let[u,_]=se();d[u]=_,s=new this._options.EventSource(t,{withCredentials:this._options.withCredentials,headers:v(v({},d),this._options.headers)})}try{s.onmessage=c=>{if(this.onreceive)try{this._logger.log(a.Trace,`(SSE transport) data received. ${Se(c.data,this._options.logMessageContent)}.`),this.onreceive(c.data)}catch(d){this._close(d);return}},s.onerror=c=>{r?this._close():n(new Error("EventSource failed to connect. The connection could not be found on the server, either the connection ID is not present on the server, or a proxy is refusing/buffering the connection. If you have multiple servers check that sticky sessions are enabled."))},s.onopen=()=>{this._logger.log(a.Information,`SSE connected to ${this._url}`),this._eventSource=s,r=!0,i()}}catch(c){n(c);return}})})}send(t){return g(this,null,function*(){return this._eventSource?qt(this._logger,"SSE",this._httpClient,this._url,t,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))})}stop(){return this._close(),Promise.resolve()}_close(t){this._eventSource&&(this._eventSource.close(),this._eventSource=void 0,this.onclose&&this.onclose(t))}};var ni=class{constructor(t,e,i,n,r,s){this._logger=i,this._accessTokenFactory=e,this._logMessageContent=n,this._webSocketConstructor=r,this._httpClient=t,this.onreceive=null,this.onclose=null,this._headers=s}connect(t,e){return g(this,null,function*(){S.isRequired(t,"url"),S.isRequired(e,"transferFormat"),S.isIn(e,A,"transferFormat"),this._logger.log(a.Trace,"(WebSockets transport) Connecting.");let i;return this._accessTokenFactory&&(i=yield this._accessTokenFactory()),new Promise((n,r)=>{t=t.replace(/^http/,"ws");let s,c=this._httpClient.getCookieString(t),d=!1;if(k.isNode||k.isReactNative){let u={},[_,q]=se();u[_]=q,i&&(u[Re.Authorization]=`Bearer ${i}`),c&&(u[Re.Cookie]=c),s=new this._webSocketConstructor(t,void 0,{headers:v(v({},u),this._headers)})}else i&&(t+=(t.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(i)}`);s||(s=new this._webSocketConstructor(t)),e===A.Binary&&(s.binaryType="arraybuffer"),s.onopen=u=>{this._logger.log(a.Information,`WebSocket connected to ${t}.`),this._webSocket=s,d=!0,n()},s.onerror=u=>{let _=null;typeof ErrorEvent<"u"&&u instanceof ErrorEvent?_=u.error:_="There was an error with the transport",this._logger.log(a.Information,`(WebSockets transport) ${_}.`)},s.onmessage=u=>{if(this._logger.log(a.Trace,`(WebSockets transport) data received. ${Se(u.data,this._logMessageContent)}.`),this.onreceive)try{this.onreceive(u.data)}catch(_){this._close(_);return}},s.onclose=u=>{if(d)this._close(u);else{let _=null;typeof ErrorEvent<"u"&&u instanceof ErrorEvent?_=u.error:_="WebSocket failed to connect. The connection could not be found on the server, either the endpoint may not be a SignalR endpoint, the connection ID is not present on the server, or there is a proxy blocking WebSockets. If you have multiple servers check that sticky sessions are enabled.",r(new Error(_))}}})})}send(t){return this._webSocket&&this._webSocket.readyState===this._webSocketConstructor.OPEN?(this._logger.log(a.Trace,`(WebSockets transport) sending data. ${Se(t,this._logMessageContent)}.`),this._webSocket.send(t),Promise.resolve()):Promise.reject("WebSocket is not in the OPEN state")}stop(){return this._webSocket&&this._close(void 0),Promise.resolve()}_close(t){this._webSocket&&(this._webSocket.onclose=()=>{},this._webSocket.onmessage=()=>{},this._webSocket.onerror=()=>{},this._webSocket.close(),this._webSocket=void 0),this._logger.log(a.Trace,"(WebSockets transport) socket closed."),this.onclose&&(this._isCloseEvent(t)&&(t.wasClean===!1||t.code!==1e3)?this.onclose(new Error(`WebSocket closed with status code: ${t.code} (${t.reason||"no reason given"}).`)):t instanceof Error?this.onclose(t):this.onclose())}_isCloseEvent(t){return t&&typeof t.wasClean=="boolean"&&typeof t.code=="number"}};var Rn=100,oi=class{constructor(t,e={}){if(this._stopPromiseResolver=()=>{},this.features={},this._negotiateVersion=1,S.isRequired(t,"url"),this._logger=Mn(e.logger),this.baseUrl=this._resolveUrl(t),e=e||{},e.logMessageContent=e.logMessageContent===void 0?!1:e.logMessageContent,typeof e.withCredentials=="boolean"||e.withCredentials===void 0)e.withCredentials=e.withCredentials===void 0?!0:e.withCredentials;else throw new Error("withCredentials option was not a 'boolean' or 'undefined' value");e.timeout=e.timeout===void 0?100*1e3:e.timeout;let i=null,n=null;if(k.isNode&&typeof Oe<"u"){let r=typeof __webpack_require__=="function"?__non_webpack_require__:Oe;i=r("ws"),n=r("eventsource")}!k.isNode&&typeof WebSocket<"u"&&!e.WebSocket?e.WebSocket=WebSocket:k.isNode&&!e.WebSocket&&i&&(e.WebSocket=i),!k.isNode&&typeof EventSource<"u"&&!e.EventSource?e.EventSource=EventSource:k.isNode&&!e.EventSource&&typeof n<"u"&&(e.EventSource=n),this._httpClient=new ei(e.httpClient||new Xt(this._logger),e.accessTokenFactory),this._connectionState="Disconnected",this._connectionStarted=!1,this._options=e,this.onreceive=null,this.onclose=null}start(t){return g(this,null,function*(){if(t=t||A.Binary,S.isIn(t,A,"transferFormat"),this._logger.log(a.Debug,`Starting connection with transfer format '${A[t]}'.`),this._connectionState!=="Disconnected")return Promise.reject(new Error("Cannot start an HttpConnection that is not in the 'Disconnected' state."));if(this._connectionState="Connecting",this._startInternalPromise=this._startInternal(t),yield this._startInternalPromise,this._connectionState==="Disconnecting"){let e="Failed to start the HttpConnection before stop() was called.";return this._logger.log(a.Error,e),yield this._stopPromise,Promise.reject(new j(e))}else if(this._connectionState!=="Connected"){let e="HttpConnection.startInternal completed gracefully but didn't enter the connection into the connected state!";return this._logger.log(a.Error,e),Promise.reject(new j(e))}this._connectionStarted=!0})}send(t){return this._connectionState!=="Connected"?Promise.reject(new Error("Cannot send data if the connection is not in the 'Connected' State.")):(this._sendQueue||(this._sendQueue=new xi(this.transport)),this._sendQueue.send(t))}stop(t){return g(this,null,function*(){if(this._connectionState==="Disconnected")return this._logger.log(a.Debug,`Call to HttpConnection.stop(${t}) ignored because the connection is already in the disconnected state.`),Promise.resolve();if(this._connectionState==="Disconnecting")return this._logger.log(a.Debug,`Call to HttpConnection.stop(${t}) ignored because the connection is already in the disconnecting state.`),this._stopPromise;this._connectionState="Disconnecting",this._stopPromise=new Promise(e=>{this._stopPromiseResolver=e}),yield this._stopInternal(t),yield this._stopPromise})}_stopInternal(t){return g(this,null,function*(){this._stopError=t;try{yield this._startInternalPromise}catch{}if(this.transport){try{yield this.transport.stop()}catch(e){this._logger.log(a.Error,`HttpConnection.transport.stop() threw error '${e}'.`),this._stopConnection()}this.transport=void 0}else this._logger.log(a.Debug,"HttpConnection.transport is undefined in HttpConnection.stop() because start() failed.")})}_startInternal(t){return g(this,null,function*(){let e=this.baseUrl;this._accessTokenFactory=this._options.accessTokenFactory,this._httpClient._accessTokenFactory=this._accessTokenFactory;try{if(this._options.skipNegotiation)if(this._options.transport===L.WebSockets)this.transport=this._constructTransport(L.WebSockets),yield this._startTransport(e,t);else throw new Error("Negotiation can only be skipped when using the WebSocket transport directly.");else{let i=null,n=0;do{if(i=yield this._getNegotiationResponse(e),this._connectionState==="Disconnecting"||this._connectionState==="Disconnected")throw new j("The connection was stopped during negotiation.");if(i.error)throw new Error(i.error);if(i.ProtocolVersion)throw new Error("Detected a connection attempt to an ASP.NET SignalR Server. This client only supports connecting to an ASP.NET Core SignalR Server. See https://aka.ms/signalr-core-differences for details.");if(i.url&&(e=i.url),i.accessToken){let r=i.accessToken;this._accessTokenFactory=()=>r,this._httpClient._accessToken=r,this._httpClient._accessTokenFactory=void 0}n++}while(i.url&&n<Rn);if(n===Rn&&i.url)throw new Error("Negotiate redirection limit exceeded.");yield this._createTransport(e,this._options.transport,i,t)}this.transport instanceof ct&&(this.features.inherentKeepAlive=!0),this._connectionState==="Connecting"&&(this._logger.log(a.Debug,"The HttpConnection connected successfully."),this._connectionState="Connected")}catch(i){return this._logger.log(a.Error,"Failed to start the connection: "+i),this._connectionState="Disconnected",this.transport=void 0,this._stopPromiseResolver(),Promise.reject(i)}})}_getNegotiationResponse(t){return g(this,null,function*(){let e={},[i,n]=se();e[i]=n;let r=this._resolveNegotiateUrl(t);this._logger.log(a.Debug,`Sending negotiation request: ${r}.`);try{let s=yield this._httpClient.post(r,{content:"",headers:v(v({},e),this._options.headers),timeout:this._options.timeout,withCredentials:this._options.withCredentials});if(s.statusCode!==200)return Promise.reject(new Error(`Unexpected status code returned from negotiate '${s.statusCode}'`));let c=JSON.parse(s.content);return(!c.negotiateVersion||c.negotiateVersion<1)&&(c.connectionToken=c.connectionId),c.useStatefulReconnect&&this._options._useStatefulReconnect!==!0?Promise.reject(new rt("Client didn't negotiate Stateful Reconnect but the server did.")):c}catch(s){let c="Failed to complete negotiation with the server: "+s;return s instanceof Q&&s.statusCode===404&&(c=c+" Either this is not a SignalR endpoint or there is a proxy blocking the connection."),this._logger.log(a.Error,c),Promise.reject(new rt(c))}})}_createConnectUrl(t,e){return e?t+(t.indexOf("?")===-1?"?":"&")+`id=${e}`:t}_createTransport(t,e,i,n){return g(this,null,function*(){let r=this._createConnectUrl(t,i.connectionToken);if(this._isITransport(e)){this._logger.log(a.Debug,"Connection was provided an instance of ITransport, using that directly."),this.transport=e,yield this._startTransport(r,n),this.connectionId=i.connectionId;return}let s=[],c=i.availableTransports||[],d=i;for(let u of c){let _=this._resolveTransportOrError(u,e,n,d?.useStatefulReconnect===!0);if(_ instanceof Error)s.push(`${u.transport} failed:`),s.push(_);else if(this._isITransport(_)){if(this.transport=_,!d){try{d=yield this._getNegotiationResponse(t)}catch(q){return Promise.reject(q)}r=this._createConnectUrl(t,d.connectionToken)}try{yield this._startTransport(r,n),this.connectionId=d.connectionId;return}catch(q){if(this._logger.log(a.Error,`Failed to start the transport '${u.transport}': ${q}`),d=void 0,s.push(new $t(`${u.transport} failed: ${q}`,L[u.transport])),this._connectionState!=="Connecting"){let de="Failed to select transport before stop() was called.";return this._logger.log(a.Debug,de),Promise.reject(new j(de))}}}}return s.length>0?Promise.reject(new Wt(`Unable to connect to the server with any of the available transports. ${s.join(" ")}`,s)):Promise.reject(new Error("None of the transports supported by the client are supported by the server."))})}_constructTransport(t){switch(t){case L.WebSockets:if(!this._options.WebSocket)throw new Error("'WebSocket' is not supported in your environment.");return new ni(this._httpClient,this._accessTokenFactory,this._logger,this._options.logMessageContent,this._options.WebSocket,this._options.headers||{});case L.ServerSentEvents:if(!this._options.EventSource)throw new Error("'EventSource' is not supported in your environment.");return new ii(this._httpClient,this._httpClient._accessToken,this._logger,this._options);case L.LongPolling:return new ct(this._httpClient,this._logger,this._options);default:throw new Error(`Unknown transport: ${t}.`)}}_startTransport(t,e){return this.transport.onreceive=this.onreceive,this.features.reconnect?this.transport.onclose=i=>g(this,null,function*(){let n=!1;if(this.features.reconnect)try{this.features.disconnected(),yield this.transport.connect(t,e),yield this.features.resend()}catch{n=!0}else{this._stopConnection(i);return}n&&this._stopConnection(i)}):this.transport.onclose=i=>this._stopConnection(i),this.transport.connect(t,e)}_resolveTransportOrError(t,e,i,n){let r=L[t.transport];if(r==null)return this._logger.log(a.Debug,`Skipping transport '${t.transport}' because it is not supported by this client.`),new Error(`Skipping transport '${t.transport}' because it is not supported by this client.`);if(Io(e,r))if(t.transferFormats.map(c=>A[c]).indexOf(i)>=0){if(r===L.WebSockets&&!this._options.WebSocket||r===L.ServerSentEvents&&!this._options.EventSource)return this._logger.log(a.Debug,`Skipping transport '${L[r]}' because it is not supported in your environment.'`),new Ut(`'${L[r]}' is not supported in your environment.`,r);this._logger.log(a.Debug,`Selecting transport '${L[r]}'.`);try{return this.features.reconnect=r===L.WebSockets?n:void 0,this._constructTransport(r)}catch(c){return c}}else return this._logger.log(a.Debug,`Skipping transport '${L[r]}' because it does not support the requested transfer format '${A[i]}'.`),new Error(`'${L[r]}' does not support ${A[i]}.`);else return this._logger.log(a.Debug,`Skipping transport '${L[r]}' because it was disabled by the client.`),new Ht(`'${L[r]}' is disabled by the client.`,r)}_isITransport(t){return t&&typeof t=="object"&&"connect"in t}_stopConnection(t){if(this._logger.log(a.Debug,`HttpConnection.stopConnection(${t}) called while in state ${this._connectionState}.`),this.transport=void 0,t=this._stopError||t,this._stopError=void 0,this._connectionState==="Disconnected"){this._logger.log(a.Debug,`Call to HttpConnection.stopConnection(${t}) was ignored because the connection is already in the disconnected state.`);return}if(this._connectionState==="Connecting")throw this._logger.log(a.Warning,`Call to HttpConnection.stopConnection(${t}) was ignored because the connection is still in the connecting state.`),new Error(`HttpConnection.stopConnection(${t}) was called while the connection is still in the connecting state.`);if(this._connectionState==="Disconnecting"&&this._stopPromiseResolver(),t?this._logger.log(a.Error,`Connection disconnected with error '${t}'.`):this._logger.log(a.Information,"Connection disconnected."),this._sendQueue&&(this._sendQueue.stop().catch(e=>{this._logger.log(a.Error,`TransportSendQueue.stop() threw error '${e}'.`)}),this._sendQueue=void 0),this.connectionId=void 0,this._connectionState="Disconnected",this._connectionStarted){this._connectionStarted=!1;try{this.onclose&&this.onclose(t)}catch(e){this._logger.log(a.Error,`HttpConnection.onclose(${t}) threw error '${e}'.`)}}}_resolveUrl(t){if(t.lastIndexOf("https://",0)===0||t.lastIndexOf("http://",0)===0)return t;if(!k.isBrowser)throw new Error(`Cannot resolve '${t}'.`);let e=window.document.createElement("a");return e.href=t,this._logger.log(a.Information,`Normalizing '${t}' to '${e.href}'.`),e.href}_resolveNegotiateUrl(t){let e=new URL(t);e.pathname.endsWith("/")?e.pathname+="negotiate":e.pathname+="/negotiate";let i=new URLSearchParams(e.searchParams);return i.has("negotiateVersion")||i.append("negotiateVersion",this._negotiateVersion.toString()),i.has("useStatefulReconnect")?i.get("useStatefulReconnect")==="true"&&(this._options._useStatefulReconnect=!0):this._options._useStatefulReconnect===!0&&i.append("useStatefulReconnect","true"),e.search=i.toString(),e.toString()}};function Io(o,t){return!o||(t&o)!==0}var xi=class o{constructor(t){this._transport=t,this._buffer=[],this._executing=!0,this._sendBufferedData=new Qe,this._transportResult=new Qe,this._sendLoopPromise=this._sendLoop()}send(t){return this._bufferData(t),this._transportResult||(this._transportResult=new Qe),this._transportResult.promise}stop(){return this._executing=!1,this._sendBufferedData.resolve(),this._sendLoopPromise}_bufferData(t){if(this._buffer.length&&typeof this._buffer[0]!=typeof t)throw new Error(`Expected data to be of type ${typeof this._buffer} but was of type ${typeof t}`);this._buffer.push(t),this._sendBufferedData.resolve()}_sendLoop(){return g(this,null,function*(){for(;;){if(yield this._sendBufferedData.promise,!this._executing){this._transportResult&&this._transportResult.reject("Connection stopped.");break}this._sendBufferedData=new Qe;let t=this._transportResult;this._transportResult=void 0;let e=typeof this._buffer[0]=="string"?this._buffer.join(""):o._concatBuffers(this._buffer);this._buffer.length=0;try{yield this._transport.send(e),t.resolve()}catch(i){t.reject(i)}}})}static _concatBuffers(t){let e=t.map(r=>r.byteLength).reduce((r,s)=>r+s),i=new Uint8Array(e),n=0;for(let r of t)i.set(new Uint8Array(r),n),n+=r.byteLength;return i.buffer}},Qe=class{constructor(){this.promise=new Promise((t,e)=>[this._resolver,this._rejecter]=[t,e])}resolve(){this._resolver()}reject(t){this._rejecter(t)}};var To="json",ri=class{constructor(){this.name=To,this.version=2,this.transferFormat=A.Text}parseMessages(t,e){if(typeof t!="string")throw new Error("Invalid input for JSON hub protocol. Expected a string.");if(!t)return[];e===null&&(e=re.instance);let i=Y.parse(t),n=[];for(let r of i){let s=JSON.parse(r);if(typeof s.type!="number")throw new Error("Invalid payload.");switch(s.type){case f.Invocation:this._isInvocationMessage(s);break;case f.StreamItem:this._isStreamItemMessage(s);break;case f.Completion:this._isCompletionMessage(s);break;case f.Ping:break;case f.Close:break;case f.Ack:this._isAckMessage(s);break;case f.Sequence:this._isSequenceMessage(s);break;default:e.log(a.Information,"Unknown message type '"+s.type+"' ignored.");continue}n.push(s)}return n}writeMessage(t){return Y.write(JSON.stringify(t))}_isInvocationMessage(t){this._assertNotEmptyString(t.target,"Invalid payload for Invocation message."),t.invocationId!==void 0&&this._assertNotEmptyString(t.invocationId,"Invalid payload for Invocation message.")}_isStreamItemMessage(t){if(this._assertNotEmptyString(t.invocationId,"Invalid payload for StreamItem message."),t.item===void 0)throw new Error("Invalid payload for StreamItem message.")}_isCompletionMessage(t){if(t.result&&t.error)throw new Error("Invalid payload for Completion message.");!t.result&&t.error&&this._assertNotEmptyString(t.error,"Invalid payload for Completion message."),this._assertNotEmptyString(t.invocationId,"Invalid payload for Completion message.")}_isAckMessage(t){if(typeof t.sequenceId!="number")throw new Error("Invalid SequenceId for Ack message.")}_isSequenceMessage(t){if(typeof t.sequenceId!="number")throw new Error("Invalid SequenceId for Sequence message.")}_assertNotEmptyString(t,e){if(typeof t!="string"||t==="")throw new Error(e)}};var Mo={trace:a.Trace,debug:a.Debug,info:a.Information,information:a.Information,warn:a.Warning,warning:a.Warning,error:a.Error,critical:a.Critical,none:a.None};function Do(o){let t=Mo[o.toLowerCase()];if(typeof t<"u")return t;throw new Error(`Unknown log level: ${o}`)}var Ae=class{configureLogging(t){if(S.isRequired(t,"logging"),Eo(t))this.logger=t;else if(typeof t=="string"){let e=Do(t);this.logger=new Ee(e)}else this.logger=new Ee(t);return this}withUrl(t,e){return S.isRequired(t,"url"),S.isNotEmpty(t,"url"),this.url=t,typeof e=="object"?this.httpConnectionOptions=v(v({},this.httpConnectionOptions),e):this.httpConnectionOptions=ee(v({},this.httpConnectionOptions),{transport:e}),this}withHubProtocol(t){return S.isRequired(t,"protocol"),this.protocol=t,this}withAutomaticReconnect(t){if(this.reconnectPolicy)throw new Error("A reconnectPolicy has already been set.");return t?Array.isArray(t)?this.reconnectPolicy=new at(t):this.reconnectPolicy=t:this.reconnectPolicy=new at,this}withServerTimeout(t){return S.isRequired(t,"milliseconds"),this._serverTimeoutInMilliseconds=t,this}withKeepAliveInterval(t){return S.isRequired(t,"milliseconds"),this._keepAliveIntervalInMilliseconds=t,this}withStatefulReconnect(t){return this.httpConnectionOptions===void 0&&(this.httpConnectionOptions={}),this.httpConnectionOptions._useStatefulReconnect=!0,this._statefulReconnectBufferSize=t?.bufferSize,this}build(){let t=this.httpConnectionOptions||{};if(t.logger===void 0&&(t.logger=this.logger),!this.url)throw new Error("The 'HubConnectionBuilder.withUrl' method must be called before building the connection.");let e=new oi(this.url,t);return st.create(e,this.logger||re.instance,this.protocol||new ri,this.reconnectPolicy,this._serverTimeoutInMilliseconds,this._keepAliveIntervalInMilliseconds,this._statefulReconnectBufferSize)}};function Eo(o){return o.log!==void 0}var ae=class o{authService=l(z);hubUrl="http://localhost:5000/hubs/chat";onlineUsers=je([]);currentOpenedChat=je(null);chatMessages=je([]);isLoading=je(!0);autoScrollEnabled=je(!0);hubConnection;startConnection(t,e){this.hubConnection?.state!==x.Connected&&(this.hubConnection&&(this.hubConnection.off("ReceiveNewMessage"),this.hubConnection.off("ReceiveMessageList"),this.hubConnection.off("OnlineUsers"),this.hubConnection.off("NotifyTypingToUser"),this.hubConnection.off("Notify")),this.hubConnection=new Ae().withUrl(`${this.hubUrl}?senderId=${e||""}`,{accessTokenFactory:()=>t}).withAutomaticReconnect().build(),this.hubConnection.start().then(()=>{console.log("Connection commenc\xE9e !")}).catch(i=>{console.log("Erreur de connexion",i)}),this.hubConnection.on("Notify",i=>{Notification.requestPermission().then(n=>{n=="granted"&&new Notification("Actif \u{1F535}",{body:i.fullName+" est en ligne.",icon:i.profileImage})})}),this.hubConnection.on("onlineUsers",i=>{console.log(i),this.onlineUsers.update(()=>i.filter(n=>n.userName!==this.authService.currentLoggedUser.userName))}),this.hubConnection.on("ReceiveMessageList",i=>{this.isLoading.update(()=>!0),this.chatMessages.update(n=>[...i,...n]),this.isLoading.update(()=>!1)}),this.hubConnection.on("NotifytypingToUser",i=>{this.onlineUsers.update(n=>n.map(r=>(r.userName===i&&(r.istyping=!0),r))),setTimeout(()=>{this.onlineUsers.update(n=>n.map(r=>(r.userName===i&&(r.istyping=!1),r)))},2e3)}),this.hubConnection.on("ReceiveNewMessage",i=>{new Audio("assets/notification.mp3").play(),document.title="(1) Nouveau message",this.chatMessages.update(r=>[...r,i])}))}disConnectConnection(){this.hubConnection?.state===x.Connected&&this.hubConnection.stop().catch(t=>console.log(t))}sendMessage(t){this.chatMessages.update(e=>[...e,{content:t,senderId:this.authService.currentLoggedUser.id,receiverId:this.currentOpenedChat()?.id,createDate:new Date().toString(),isRead:!1,id:0}]),this.hubConnection?.invoke("sendMessage",{receiverId:this.currentOpenedChat()?.id,content:t}).then(e=>{console.log("Message envoyer",e)}).catch(e=>{console.log(e)})}statut(t){return this.currentOpenedChat()?this.onlineUsers().find(n=>n.userName===t)?.istyping?"Typing...":this.isUserOnline():"offline"}isUserOnline(){return this.onlineUsers().find(e=>e.userName===this.currentOpenedChat()?.userName)?.isOnline?"En ligne":this.currentOpenedChat().userName}loadMessages(t){this.isLoading.update(()=>!0),this.hubConnection?.invoke("LoadMessages",this.currentOpenedChat()?.id,t).then().catch().finally(()=>{this.isLoading.update(()=>!1)})}notifyTyping(){this.hubConnection.invoke("NotifyTyping",this.currentOpenedChat()?.userName).then(t=>{console.log("Notification pour",t)}).catch(t=>{console.log(t)})}static \u0275fac=function(e){return new(e||o)};static \u0275prov=J({token:o,factory:o.\u0275fac,providedIn:"root"})};var si=class o{static \u0275fac=function(e){return new(e||o)};static \u0275cmp=C({type:o,selectors:[["app-typing-indicator"]],decls:7,vars:0,consts:[[1,"flex","items-center","space-x-2"],[1,"block","text-sm","text-gray-600"],[1,"flex","space-x-1.5"],[1,"w-[5px]","h-[5px]","bg-gray-400","rounded-full","animate-pulse"],[1,"w-[5px]","h-[5px]","bg-gray-600","rounded-full","animate-pulse"],[1,"w-[5px]","h-[5px]","bg-gray-800","rounded-full","animate-pulse"]],template:function(e,i){e&1&&(h(0,"div",0)(1,"span",1),w(2,"Typing ..."),m(),h(3,"div",2),b(4,"div",3)(5,"div",4)(6,"div",5),m()())},encapsulation:2})};function Ro(o,t){o&1&&b(0,"app-typing-indicator")}function Ao(o,t){o&1&&(h(0,"div",18),b(1,"div",20),m())}function Po(o,t){o&1&&b(0,"div",19)}function Oo(o,t){if(o&1){let e=U();h(0,"div",14),D("click",function(){let n=T(e).$implicit,r=y();return M(r.openChatWindow(n))}),b(1,"img",15),h(2,"div")(3,"span",16),w(4),ie(5,"titlecase"),m(),h(6,"p",17),w(7),m(),I(8,Ro,1,0,"app-typing-indicator"),m(),I(9,Ao,2,0,"div",18)(10,Po,1,0,"div",19),m()}if(o&2){let e=t.$implicit;p(),E("src",e.profilePicture,ge),p(3),$(" ",Me(5,5,e.fullName)," "),p(3),$(" ",e.unreadCount?e.unreadCount+"nouveau messages":""," "),p(),R(e.istyping?8:-1),p(),R(e.isOnline?9:10)}}var ai=class o{authService=l(z);chatService=l(ae);router=l(Rt);snackBar=l(pn);logout(){this.authService.logout(),this.snackBar.open("Vous vous \xEAtes d\xE9connect\xE9s(es) avec succ\xE8s !","Close"),this.router.navigate(["/login"]),this.chatService.disConnectConnection()}ngOnInit(){this.chatService.startConnection(this.authService.getAccessToken)}openChatWindow(t){this.chatService.currentOpenedChat.set(t),this.chatService.loadMessages(1)}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=C({type:o,selectors:[["app-chat-sidebar"]],decls:25,vars:5,consts:[["menu","matMenu"],[1,"p-4"],[1,"flex","items-center","justify-between","bg-white","z-10","sticky","top-0","p-1","w-full"],[1,"flex","items-center"],["alt","Profile Picture",1,"h-10","w-10","rounded-full","border-gray-100","border-2","object-cover",3,"src"],[1,"font-medium","ml-2","text-gray-500"],["mat-icon-button","",3,"matMenuTriggerFor"],[1,"text-black"],["mat-menu-item","",3,"click"],[1,"relative","flex","mt-4","items-center","gap-2","justity-between"],["placeholder","Recherche","type","text",1,"bg-slate-100","border-1","focus:ring-1","focus:ring-slate-100","focus:outline-none","w-full","mb-3","border-slate-50","p-1","pl-10","text-slate-500","font-normal","px-3","rounded-md"],[1,"absolute","text-gray-400","left-2","top-1","pr-3"],[1,"py-1","overflow-y-auto","scroll-smooth"],[1,"flex","items-center","border-b","bg-white","hover:bg-slate-200","cursor-pointer","hover:rounded-md","border-gray-100","p-3","gap-2","py-2"],[1,"flex","items-center","border-b","bg-white","hover:bg-slate-200","cursor-pointer","hover:rounded-md","border-gray-100","p-3","gap-2","py-2",3,"click"],["alt","",1,"h-10","w-10","rounded-full",3,"src"],[1,"text-base","text-gray-600","font-normal"],[1,"text-xs","text-slate-400"],[1,"ml-auto","font-medium","text-xs"],[1,"bg-green-100","w-2","h-2","rounded-full"],[1,"bg-green-700","w-2","h-2","rounded-full"]],template:function(e,i){if(e&1){let n=U();h(0,"div",1)(1,"div",2)(2,"div",3),b(3,"img",4),h(4,"div",5),w(5),ie(6,"titlecase"),m()(),h(7,"div")(8,"button",6)(9,"mat-icon",7),w(10,"more_vert"),m()(),h(11,"mat-menu",null,0)(13,"button",8),D("click",function(){return T(n),M(i.logout())}),h(14,"mat-icon"),w(15,"logout"),m(),h(16,"span"),w(17,"Deconnexion"),m()()()()(),h(18,"div",9),b(19,"input",10),h(20,"mat-icon",11),w(21," search "),m()(),h(22,"div",12),kt(23,Oo,11,7,"div",13,Ui),m()()}if(e&2){let n=Ue(12);p(3),E("src",i.authService.currentLoggedUser.profileImage||"https://randomuser.me/api/portraits/women/26.jpg",ge),p(2),$(" ",Me(6,3,i.authService.currentLoggedUser==null?null:i.authService.currentLoggedUser.fullName)," "),p(3),E("matMenuTriggerFor",n),p(15),xt(i.chatService.onlineUsers())}},dependencies:[dn,cn,ye,we,$e,xn,qe,ot,kn,si],encapsulation:2})};var Lo=["determinateSpinner"];function Fo(o,t){if(o&1&&(Ie(),h(0,"svg",11),b(1,"circle",12),m()),o&2){let e=y();O("viewBox",e._viewBox()),p(),St("stroke-dasharray",e._strokeCircumference(),"px")("stroke-dashoffset",e._strokeCircumference()/2,"px")("stroke-width",e._circleStrokeWidth(),"%"),O("r",e._circleRadius())}}var No=new P("mat-progress-spinner-default-options",{providedIn:"root",factory:Bo});function Bo(){return{diameter:An}}var An=100,jo=10,Pn=(()=>{class o{_elementRef=l(G);_noopAnimations;get color(){return this._color||this._defaultColor}set color(e){this._color=e}_color;_defaultColor="primary";_determinateCircle;constructor(){let e=l(pe,{optional:!0}),i=l(No);this._noopAnimations=e==="NoopAnimations"&&!!i&&!i._forceAnimations,this.mode=this._elementRef.nativeElement.nodeName.toLowerCase()==="mat-spinner"?"indeterminate":"determinate",i&&(i.color&&(this.color=this._defaultColor=i.color),i.diameter&&(this.diameter=i.diameter),i.strokeWidth&&(this.strokeWidth=i.strokeWidth))}mode;get value(){return this.mode==="determinate"?this._value:0}set value(e){this._value=Math.max(0,Math.min(100,e||0))}_value=0;get diameter(){return this._diameter}set diameter(e){this._diameter=e||0}_diameter=An;get strokeWidth(){return this._strokeWidth??this.diameter/10}set strokeWidth(e){this._strokeWidth=e||0}_strokeWidth;_circleRadius(){return(this.diameter-jo)/2}_viewBox(){let e=this._circleRadius()*2+this.strokeWidth;return`0 0 ${e} ${e}`}_strokeCircumference(){return 2*Math.PI*this._circleRadius()}_strokeDashOffset(){return this.mode==="determinate"?this._strokeCircumference()*(100-this._value)/100:null}_circleStrokeWidth(){return this.strokeWidth/this.diameter*100}static \u0275fac=function(i){return new(i||o)};static \u0275cmp=C({type:o,selectors:[["mat-progress-spinner"],["mat-spinner"]],viewQuery:function(i,n){if(i&1&&H(Lo,5),i&2){let r;N(r=B())&&(n._determinateCircle=r.first)}},hostAttrs:["role","progressbar","tabindex","-1",1,"mat-mdc-progress-spinner","mdc-circular-progress"],hostVars:18,hostBindings:function(i,n){i&2&&(O("aria-valuemin",0)("aria-valuemax",100)("aria-valuenow",n.mode==="determinate"?n.value:null)("mode",n.mode),Ve("mat-"+n.color),St("width",n.diameter,"px")("height",n.diameter,"px")("--mdc-circular-progress-size",n.diameter+"px")("--mdc-circular-progress-active-indicator-width",n.diameter+"px"),X("_mat-animation-noopable",n._noopAnimations)("mdc-circular-progress--indeterminate",n.mode==="indeterminate"))},inputs:{color:"color",mode:"mode",value:[2,"value","value",He],diameter:[2,"diameter","diameter",He],strokeWidth:[2,"strokeWidth","strokeWidth",He]},exportAs:["matProgressSpinner"],decls:14,vars:11,consts:[["circle",""],["determinateSpinner",""],["aria-hidden","true",1,"mdc-circular-progress__determinate-container"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__determinate-circle-graphic"],["cx","50%","cy","50%",1,"mdc-circular-progress__determinate-circle"],["aria-hidden","true",1,"mdc-circular-progress__indeterminate-container"],[1,"mdc-circular-progress__spinner-layer"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-left"],[3,"ngTemplateOutlet"],[1,"mdc-circular-progress__gap-patch"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-right"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__indeterminate-circle-graphic"],["cx","50%","cy","50%"]],template:function(i,n){if(i&1&&(I(0,Fo,2,8,"ng-template",null,0,zi),h(2,"div",2,1),Ie(),h(4,"svg",3),b(5,"circle",4),m()(),Fi(),h(6,"div",5)(7,"div",6)(8,"div",7),It(9,8),m(),h(10,"div",9),It(11,8),m(),h(12,"div",10),It(13,8),m()()()),i&2){let r=Ue(1);p(4),O("viewBox",n._viewBox()),p(),St("stroke-dasharray",n._strokeCircumference(),"px")("stroke-dashoffset",n._strokeDashOffset(),"px")("stroke-width",n._circleStrokeWidth(),"%"),O("r",n._circleRadius()),p(4),E("ngTemplateOutlet",r),p(2),E("ngTemplateOutlet",r),p(2),E("ngTemplateOutlet",r)}},dependencies:[Qi],styles:[`.mat-mdc-progress-spinner{display:block;overflow:hidden;line-height:0;position:relative;direction:ltr;transition:opacity 250ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-progress-spinner circle{stroke-width:var(--mdc-circular-progress-active-indicator-width, 4px)}.mat-mdc-progress-spinner._mat-animation-noopable,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__determinate-circle{transition:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__spinner-layer,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container{animation:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container circle{stroke-dasharray:0 !important}@media(forced-colors: active){.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle{stroke:currentColor;stroke:CanvasText}}.mdc-circular-progress__determinate-container,.mdc-circular-progress__indeterminate-circle-graphic,.mdc-circular-progress__indeterminate-container,.mdc-circular-progress__spinner-layer{position:absolute;width:100%;height:100%}.mdc-circular-progress__determinate-container{transform:rotate(-90deg)}.mdc-circular-progress--indeterminate .mdc-circular-progress__determinate-container{opacity:0}.mdc-circular-progress__indeterminate-container{font-size:0;letter-spacing:0;white-space:nowrap;opacity:0}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{opacity:1;animation:mdc-circular-progress-container-rotate 1568.2352941176ms linear infinite}.mdc-circular-progress__determinate-circle-graphic,.mdc-circular-progress__indeterminate-circle-graphic{fill:rgba(0,0,0,0)}.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:var(--mdc-circular-progress-active-indicator-color, var(--mat-sys-primary))}@media(forced-colors: active){.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}.mdc-circular-progress__determinate-circle{transition:stroke-dashoffset 500ms cubic-bezier(0, 0, 0.2, 1)}.mdc-circular-progress__gap-patch{position:absolute;top:0;left:47.5%;box-sizing:border-box;width:5%;height:100%;overflow:hidden}.mdc-circular-progress__gap-patch .mdc-circular-progress__indeterminate-circle-graphic{left:-900%;width:2000%;transform:rotate(180deg)}.mdc-circular-progress__circle-clipper .mdc-circular-progress__indeterminate-circle-graphic{width:200%}.mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{left:-100%}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-left .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-left-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-right-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress__circle-clipper{display:inline-flex;position:relative;width:50%;height:100%;overflow:hidden}.mdc-circular-progress--indeterminate .mdc-circular-progress__spinner-layer{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}@keyframes mdc-circular-progress-container-rotate{to{transform:rotate(360deg)}}@keyframes mdc-circular-progress-spinner-layer-rotate{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes mdc-circular-progress-left-spin{from{transform:rotate(265deg)}50%{transform:rotate(130deg)}to{transform:rotate(265deg)}}@keyframes mdc-circular-progress-right-spin{from{transform:rotate(-265deg)}50%{transform:rotate(-130deg)}to{transform:rotate(-265deg)}}
`],encapsulation:2,changeDetection:0})}return o})();var Vo=["chatBox"],Uo=(o,t)=>t.id;function Ho(o,t){o&1&&(h(0,"div",6),b(1,"mat-spinner",7),w(2,"Chargement... "),m())}function $o(o,t){o&1&&w(0," Charger plus... ")}function Wo(o,t){if(o&1){let e=U();h(0,"div",3)(1,"button",5),D("click",function(){T(e);let n=y();return M(n.loadMoreMessage())}),I(2,Ho,3,0,"div",6)(3,$o,1,0),m()()}if(o&2){let e=y();p(2),R(e.chatService.isLoading()?2:3)}}function zo(o,t){if(o&1&&(h(0,"div",8)(1,"div",9),b(2,"img",10),m(),h(3,"div",11)(4,"span",12),w(5),m(),h(6,"span",13),w(7),ie(8,"date"),m()()()),o&2){let e,i,n=y().$implicit,r=y();p(2),E("src",(e=r.chatService.currentOpenedChat())==null?null:e.profilePicture,ge)("alt",(i=r.chatService.currentOpenedChat())==null?null:i.fullName),p(3),$(" ",n.content," "),p(2),$(" ",_i(8,4,n.createDate,"short")," ")}}function qo(o,t){if(o&1&&(h(0,"div",14)(1,"div",15)(2,"span",16),w(3),m(),h(4,"span",17),w(5),ie(6,"date"),m()(),h(7,"div",18),b(8,"img",10),m()(),b(9,"br")),o&2){let e=y().$implicit,i=y();p(3),$(" ",e.content," "),p(2),$(" ",_i(6,4,e.createDate,"short")," "),p(3),E("src",i.authService.currentLoggedUser==null?null:i.authService.currentLoggedUser.profileImage,ge)("alt",i.authService.currentLoggedUser==null?null:i.authService.currentLoggedUser.fullName)}}function Go(o,t){if(o&1&&I(0,zo,9,7,"div",8)(1,qo,10,7),o&2){let e=t.$implicit,i=y();R(e.senderId!==(i.authService.currentLoggedUser==null?null:i.authService.currentLoggedUser.id)?0:1)}}function Qo(o,t){o&1&&b(0,"mat-spinner",19)}function Yo(o,t){o&1&&(h(0,"mat-icon",20),w(1," chat "),m(),h(2,"h6",21),w(3," Pas de message ! "),m())}function Xo(o,t){if(o&1&&(h(0,"div",4),I(1,Qo,1,0,"mat-spinner",19)(2,Yo,4,0),m()),o&2){let e=y();p(),R(e.chatService.isLoading()?1:2)}}var ci=class o{chatBox;chatService=l(ae);authService=l(z);pageNumber=2;loadMoreMessage(){this.pageNumber++,this.chatService.loadMessages(this.pageNumber),this.scrollTop()}ngAfterViewChecked(){this.chatService.autoScrollEnabled()&&this.scrollToBottom()}scrollToBottom(){this.chatService.autoScrollEnabled.set(!0),this.chatBox.nativeElement.scrollTo({top:this.chatBox.nativeElement.scrollHeight,behavior:"smooth"})}scrollTop(){this.chatService.autoScrollEnabled.set(!1),this.chatBox.nativeElement.scrollTo({top:0,behavior:"smooth"})}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=C({type:o,selectors:[["app-chat-box"]],viewQuery:function(e,i){if(e&1&&H(Vo,5,G),e&2){let n;N(n=B())&&(i.chatBox=n.first)}},decls:7,vars:2,consts:[["chatBox",""],[1,"flex","chat-box","py-2","border-[20px]","border-transparent","flex-col"],[1,"h-100"],[1,"text-center","py-1","sticky","top-0","w-full"],[1,"flex","flex-col","items-center","justify-center","h-full"],[1,"text-gray-500","text-xs","shadow","px-5","py-2","rounded-full","bg-gray-200","hover:text-gray-700","focus:outline-none",3,"click"],[1,"flex","items-center","gap-2"],["diameter","20","strokeWidth","3"],[1,"flex","mb-3","flex-row","items-center","justify-normal"],[1,"flex","items-center","justify-center","h-10","w-10","rounded-full","bg-gradient-to-r","from-green-400","to-blue-500","flex-shrink-0"],[1,"rounded-full","h-8","w-8",3,"src","alt"],[1,"chat-message","bg-white","p-4","rounded-lg","ml-2","shadow-sm"],[1,"text-sm","text-gray-800","block"],[1,"text-right","text-gray-400","text-[10px]","block","mt-1"],[1,"flex","md-3","flex-row","items-center","justify-end"],[1,"chat-message","bg-blue-600","p-4","rounded-lg","mr-2","shadow-sm","text-white"],[1,"text-sm","block"],[1,"text-right","text-gray-200","text-xs","block","mt-1"],[1,"flex","items-center","justify-center","h-10","w-10","rounded-full","bg-gradient-to-r","from-blue-500","to-purple-500","flex-shrink-0"],["diameter","40","strokeWidth","3"],[1,"text-gray-400","chat-icon"],[1,"text-center","text-gray-500"]],template:function(e,i){e&1&&(h(0,"div",1,0)(2,"div",2),I(3,Wo,4,1,"div",3),kt(4,Go,2,1,null,null,Uo,!1,Xo,3,1,"div",4),m()()),e&2&&(p(3),R(i.chatService.chatMessages().length>5?3:-1),p(),xt(i.chatService.chatMessages()))},dependencies:[Pn,Yi,ye,we],styles:[".chat-box[_ngcontent-%COMP%]{scroll-behavior:smooth;overflow:hidden;padding:10px;background-color:#f5f5f5;display:flex;flex-direction:column;box-shadow:0 0 10px #0000001a;height:70vh;border-radius:5px;overflow-y:scroll}.chat-box[_ngcontent-%COMP%]::webkit-scrollbar{width:5px;transition:width .3s}.chat-box[_ngcontent-%COMP%]:hover::-webkit-scrollbar{width:5px}.chat-box[_ngcontent-%COMP%]::-webkit-scrollbar-track{background-color:transparent;border-radius:10px}.chat-box[_ngcontent-%COMP%]:hover::-webkit-scrollbar-thumb{background:gray;border-radius:10px}.chat-box[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#555}.chat-icon[_ngcontent-%COMP%]{width:40px;height:40px;font-size:48px}"]})};var ke=class o{hubUrl="http://localhost:5000/hubs/video";hubConnection;incomingCall=!1;isCallActive=!1;remoteUserId="";peerConnection;offerReceived=new ft(null);answerReceived=new ft(null);iceCandidateReceived=new ft(null);authService=l(z);startConnection(){this.hubConnection=new Ae().withUrl(this.hubUrl,{accessTokenFactory:()=>this.authService.getAccessToken}).withAutomaticReconnect().build(),this.hubConnection.start().catch(t=>console.error("SignalRConnectionError",t)),this.hubConnection.on("ReceiveOffer",(t,e)=>{this.offerReceived.next({senderId:t,offer:JSON.parse(e)})}),this.hubConnection.on("ReceiveAnswer",(t,e)=>{this.answerReceived.next({senderId:t,answer:JSON.parse(e)})}),this.hubConnection.on("ReceiveCandidate",(t,e)=>{this.iceCandidateReceived.next({senderId:t,candidate:JSON.parse(e)})})}sendOffer(t,e){this.hubConnection.invoke("SendOffer",t,JSON.stringify(e))}sendAnswer(t,e){this.hubConnection.invoke("SendAnswer",t,JSON.stringify(e))}sendIceCandidate(t,e){this.hubConnection.invoke("SendIceCandidate",t,JSON.stringify(e))}sendEndCall(t){this.hubConnection.invoke("EndCall",t)}static \u0275fac=function(e){return new(e||o)};static \u0275prov=J({token:o,factory:o.\u0275fac,providedIn:"root"})};function Jo(o,t){}var xe=class{viewContainerRef;injector;id;role="dialog";panelClass="";hasBackdrop=!0;backdropClass="";disableClose=!1;width="";height="";minWidth;minHeight;maxWidth;maxHeight;positionStrategy;data=null;direction;ariaDescribedBy=null;ariaLabelledBy=null;ariaLabel=null;ariaModal=!1;autoFocus="first-tabbable";restoreFocus=!0;scrollStrategy;closeOnNavigation=!0;closeOnDestroy=!0;closeOnOverlayDetachments=!0;componentFactoryResolver;providers;container;templateContext};var Mi=(()=>{class o extends hn{_elementRef=l(G);_focusTrapFactory=l(sn);_config;_interactivityChecker=l(rn);_ngZone=l(Be);_overlayRef=l(wi);_focusMonitor=l(De);_renderer=l(wt);_changeDetectorRef=l(be);_injector=l(ce);_platform=l(on);_document=l(Et,{optional:!0});_portalOutlet;_focusTrapped=new F;_focusTrap=null;_elementFocusedBeforeDialogWasOpened=null;_closeInteractionType=null;_ariaLabelledByQueue=[];_isDestroyed=!1;constructor(){super(),this._config=l(xe,{optional:!0})||new xe,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_addAriaLabelledBy(e){this._ariaLabelledByQueue.push(e),this._changeDetectorRef.markForCheck()}_removeAriaLabelledBy(e){let i=this._ariaLabelledByQueue.indexOf(e);i>-1&&(this._ariaLabelledByQueue.splice(i,1),this._changeDetectorRef.markForCheck())}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._focusTrapped.complete(),this._isDestroyed=!0,this._restoreFocus()}attachComponentPortal(e){this._portalOutlet.hasAttached();let i=this._portalOutlet.attachComponentPortal(e);return this._contentAttached(),i}attachTemplatePortal(e){this._portalOutlet.hasAttached();let i=this._portalOutlet.attachTemplatePortal(e);return this._contentAttached(),i}attachDomPortal=e=>{this._portalOutlet.hasAttached();let i=this._portalOutlet.attachDomPortal(e);return this._contentAttached(),i};_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(e,i){this._interactivityChecker.isFocusable(e)||(e.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{let n=()=>{r(),s(),e.removeAttribute("tabindex")},r=this._renderer.listen(e,"blur",n),s=this._renderer.listen(e,"mousedown",n)})),e.focus(i)}_focusByCssSelector(e,i){let n=this._elementRef.nativeElement.querySelector(e);n&&this._forceFocus(n,i)}_trapFocus(e){this._isDestroyed||bt(()=>{let i=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||i.focus(e);break;case!0:case"first-tabbable":this._focusTrap?.focusInitialElement(e)||this._focusDialogContainer(e);break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]',e);break;default:this._focusByCssSelector(this._config.autoFocus,e);break}this._focusTrapped.next()},{injector:this._injector})}_restoreFocus(){let e=this._config.restoreFocus,i=null;if(typeof e=="string"?i=this._document.querySelector(e):typeof e=="boolean"?i=e?this._elementFocusedBeforeDialogWasOpened:null:e&&(i=e),this._config.restoreFocus&&i&&typeof i.focus=="function"){let n=At(),r=this._elementRef.nativeElement;(!n||n===this._document.body||n===r||r.contains(n))&&(this._focusMonitor?(this._focusMonitor.focusVia(i,this._closeInteractionType),this._closeInteractionType=null):i.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(e){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus(e)}_containsFocus(){let e=this._elementRef.nativeElement,i=At();return e===i||e.contains(i)}_initializeFocusTrap(){this._platform.isBrowser&&(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=At()))}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}static \u0275fac=function(i){return new(i||o)};static \u0275cmp=C({type:o,selectors:[["cdk-dialog-container"]],viewQuery:function(i,n){if(i&1&&H(it,7),i&2){let r;N(r=B())&&(n._portalOutlet=r.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(i,n){i&2&&O("id",n._config.id||null)("role",n._config.role)("aria-modal",n._config.ariaModal)("aria-labelledby",n._config.ariaLabel?null:n._ariaLabelledByQueue[0])("aria-label",n._config.ariaLabel)("aria-describedby",n._config.ariaDescribedBy||null)},features:[et],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(i,n){i&1&&I(0,Jo,0,0,"ng-template",0)},dependencies:[it],styles:[`.cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}
`],encapsulation:2})}return o})(),lt=class{overlayRef;config;componentInstance;componentRef;containerInstance;disableClose;closed=new F;backdropClick;keydownEvents;outsidePointerEvents;id;_detachSubscription;constructor(t,e){this.overlayRef=t,this.config=e,this.disableClose=e.disableClose,this.backdropClick=t.backdropClick(),this.keydownEvents=t.keydownEvents(),this.outsidePointerEvents=t.outsidePointerEvents(),this.id=e.id,this.keydownEvents.subscribe(i=>{i.keyCode===27&&!this.disableClose&&!We(i)&&(i.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})}),this._detachSubscription=t.detachments().subscribe(()=>{e.closeOnOverlayDetachments!==!1&&this.close()})}close(t,e){if(this.containerInstance){let i=this.closed;this.containerInstance._closeInteractionType=e?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),i.next(t),i.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(t="",e=""){return this.overlayRef.updateSize({width:t,height:e}),this}addPanelClass(t){return this.overlayRef.addPanelClass(t),this}removePanelClass(t){return this.overlayRef.removePanelClass(t),this}},Zo=new P("DialogScrollStrategy",{providedIn:"root",factory:()=>{let o=l(ne);return()=>o.scrollStrategies.block()}}),er=new P("DialogData"),tr=new P("DefaultDialogConfig");var On=(()=>{class o{_overlay=l(ne);_injector=l(ce);_defaultOptions=l(tr,{optional:!0});_parentDialog=l(o,{optional:!0,skipSelf:!0});_overlayContainer=l(un);_idGenerator=l(ve);_openDialogsAtThisLevel=[];_afterAllClosedAtThisLevel=new F;_afterOpenedAtThisLevel=new F;_ariaHiddenElements=new Map;_scrollStrategy=l(Zo);get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}afterAllClosed=_t(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(he(void 0)));constructor(){}open(e,i){let n=this._defaultOptions||new xe;i=v(v({},n),i),i.id=i.id||this._idGenerator.getId("cdk-dialog-"),i.id&&this.getDialogById(i.id);let r=this._getOverlayConfig(i),s=this._overlay.create(r),c=new lt(s,i),d=this._attachContainer(s,c,i);if(c.containerInstance=d,!this.openDialogs.length){let u=this._overlayContainer.getContainerElement();d._focusTrapped?d._focusTrapped.pipe(W(1)).subscribe(()=>{this._hideNonDialogContentFromAssistiveTechnology(u)}):this._hideNonDialogContentFromAssistiveTechnology(u)}return this._attachDialogContent(e,c,d,i),this.openDialogs.push(c),c.closed.subscribe(()=>this._removeOpenDialog(c,!0)),this.afterOpened.next(c),c}closeAll(){Ti(this.openDialogs,e=>e.close())}getDialogById(e){return this.openDialogs.find(i=>i.id===e)}ngOnDestroy(){Ti(this._openDialogsAtThisLevel,e=>{e.config.closeOnDestroy===!1&&this._removeOpenDialog(e,!1)}),Ti(this._openDialogsAtThisLevel,e=>e.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(e){let i=new Nt({positionStrategy:e.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:e.scrollStrategy||this._scrollStrategy(),panelClass:e.panelClass,hasBackdrop:e.hasBackdrop,direction:e.direction,minWidth:e.minWidth,minHeight:e.minHeight,maxWidth:e.maxWidth,maxHeight:e.maxHeight,width:e.width,height:e.height,disposeOnNavigation:e.closeOnNavigation});return e.backdropClass&&(i.backdropClass=e.backdropClass),i}_attachContainer(e,i,n){let r=n.injector||n.viewContainerRef?.injector,s=[{provide:xe,useValue:n},{provide:lt,useValue:i},{provide:wi,useValue:e}],c;n.container?typeof n.container=="function"?c=n.container:(c=n.container.type,s.push(...n.container.providers(n))):c=Mi;let d=new vi(c,n.viewContainerRef,ce.create({parent:r||this._injector,providers:s}));return e.attach(d).instance}_attachDialogContent(e,i,n,r){if(e instanceof vt){let s=this._createInjector(r,i,n,void 0),c={$implicit:r.data,dialogRef:i};r.templateContext&&(c=v(v({},c),typeof r.templateContext=="function"?r.templateContext():r.templateContext)),n.attachTemplatePortal(new Ft(e,null,c,s))}else{let s=this._createInjector(r,i,n,this._injector),c=n.attachComponentPortal(new vi(e,r.viewContainerRef,s));i.componentRef=c,i.componentInstance=c.instance}}_createInjector(e,i,n,r){let s=e.injector||e.viewContainerRef?.injector,c=[{provide:er,useValue:e.data},{provide:lt,useValue:i}];return e.providers&&(typeof e.providers=="function"?c.push(...e.providers(i,e,n)):c.push(...e.providers)),e.direction&&(!s||!s.get(tt,null,{optional:!0}))&&c.push({provide:tt,useValue:{value:e.direction,change:Je()}}),ce.create({parent:s||r,providers:c})}_removeOpenDialog(e,i){let n=this.openDialogs.indexOf(e);n>-1&&(this.openDialogs.splice(n,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((r,s)=>{r?s.setAttribute("aria-hidden",r):s.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),i&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(e){if(e.parentElement){let i=e.parentElement.children;for(let n=i.length-1;n>-1;n--){let r=i[n];r!==e&&r.nodeName!=="SCRIPT"&&r.nodeName!=="STYLE"&&!r.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(r,r.getAttribute("aria-hidden")),r.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){let e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}static \u0275fac=function(i){return new(i||o)};static \u0275prov=J({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();function Ti(o,t){let e=o.length;for(;e--;)t(o[e])}function ir(o,t){}var ht=class{viewContainerRef;injector;id;role="dialog";panelClass="";hasBackdrop=!0;backdropClass="";disableClose=!1;width="";height="";minWidth;minHeight;maxWidth;maxHeight;position;data=null;direction;ariaDescribedBy=null;ariaLabelledBy=null;ariaLabel=null;ariaModal=!1;autoFocus="first-tabbable";restoreFocus=!0;delayFocusTrap=!0;scrollStrategy;closeOnNavigation=!0;componentFactoryResolver;enterAnimationDuration;exitAnimationDuration},Di="mdc-dialog--open",Ln="mdc-dialog--opening",Fn="mdc-dialog--closing",nr=150,or=75,jn=(()=>{class o extends Mi{_animationMode=l(pe,{optional:!0});_animationStateChanged=new le;_animationsEnabled=this._animationMode!=="NoopAnimations";_actionSectionCount=0;_hostElement=this._elementRef.nativeElement;_enterAnimationDuration=this._animationsEnabled?Bn(this._config.enterAnimationDuration)??nr:0;_exitAnimationDuration=this._animationsEnabled?Bn(this._config.exitAnimationDuration)??or:0;_animationTimer=null;_contentAttached(){super._contentAttached(),this._startOpenAnimation()}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._enterAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(Nn,`${this._enterAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(Ln,Di)),this._waitForAnimationToComplete(this._enterAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(Di),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._exitAnimationDuration}),this._hostElement.classList.remove(Di),this._animationsEnabled?(this._hostElement.style.setProperty(Nn,`${this._exitAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(Fn)),this._waitForAnimationToComplete(this._exitAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_updateActionSectionCount(e){this._actionSectionCount+=e,this._changeDetectorRef.markForCheck()}_finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._enterAnimationDuration)};_finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._exitAnimationDuration})};_clearAnimationClasses(){this._hostElement.classList.remove(Ln,Fn)}_waitForAnimationToComplete(e,i){this._animationTimer!==null&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(i,e)}_requestAnimationFrame(e){this._ngZone.runOutsideAngular(()=>{typeof requestAnimationFrame=="function"?requestAnimationFrame(e):e()})}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(e){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:e})}ngOnDestroy(){super.ngOnDestroy(),this._animationTimer!==null&&clearTimeout(this._animationTimer)}attachComponentPortal(e){let i=super.attachComponentPortal(e);return i.location.nativeElement.classList.add("mat-mdc-dialog-component-host"),i}static \u0275fac=(()=>{let e;return function(n){return(e||(e=fi(o)))(n||o)}})();static \u0275cmp=C({type:o,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:10,hostBindings:function(i,n){i&2&&(Tt("id",n._config.id),O("aria-modal",n._config.ariaModal)("role",n._config.role)("aria-labelledby",n._config.ariaLabel?null:n._ariaLabelledByQueue[0])("aria-label",n._config.ariaLabel)("aria-describedby",n._config.ariaDescribedBy||null),X("_mat-animation-noopable",!n._animationsEnabled)("mat-mdc-dialog-container-with-actions",n._actionSectionCount>0))},features:[et],decls:3,vars:0,consts:[[1,"mat-mdc-dialog-inner-container","mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(i,n){i&1&&(h(0,"div",0)(1,"div",1),I(2,ir,0,0,"ng-template",2),m()())},dependencies:[it],styles:[`.mat-mdc-dialog-container{width:100%;height:100%;display:block;box-sizing:border-box;max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit;outline:0}.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-max-width, 560px);min-width:var(--mat-dialog-container-min-width, 280px)}@media(max-width: 599px){.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-small-max-width, calc(100vw - 32px))}}.mat-mdc-dialog-inner-container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;opacity:0;transition:opacity linear var(--mat-dialog-transition-duration, 0ms);max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mdc-dialog--closing .mat-mdc-dialog-inner-container{transition:opacity 75ms linear;transform:none}.mdc-dialog--open .mat-mdc-dialog-inner-container{opacity:1}._mat-animation-noopable .mat-mdc-dialog-inner-container{transition:none}.mat-mdc-dialog-surface{display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;width:100%;height:100%;position:relative;overflow-y:auto;outline:0;transform:scale(0.8);transition:transform var(--mat-dialog-transition-duration, 0ms) cubic-bezier(0, 0, 0.2, 1);max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit;box-shadow:var(--mat-dialog-container-elevation-shadow, none);border-radius:var(--mdc-dialog-container-shape, var(--mat-sys-corner-extra-large, 4px));background-color:var(--mdc-dialog-container-color, var(--mat-sys-surface, white))}[dir=rtl] .mat-mdc-dialog-surface{text-align:right}.mdc-dialog--open .mat-mdc-dialog-surface,.mdc-dialog--closing .mat-mdc-dialog-surface{transform:none}._mat-animation-noopable .mat-mdc-dialog-surface{transition:none}.mat-mdc-dialog-surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}.mat-mdc-dialog-title{display:block;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:var(--mat-dialog-headline-padding, 6px 24px 13px)}.mat-mdc-dialog-title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mat-mdc-dialog-title{text-align:right}.mat-mdc-dialog-container .mat-mdc-dialog-title{color:var(--mdc-dialog-subhead-color, var(--mat-sys-on-surface, rgba(0, 0, 0, 0.87)));font-family:var(--mdc-dialog-subhead-font, var(--mat-sys-headline-small-font, inherit));line-height:var(--mdc-dialog-subhead-line-height, var(--mat-sys-headline-small-line-height, 1.5rem));font-size:var(--mdc-dialog-subhead-size, var(--mat-sys-headline-small-size, 1rem));font-weight:var(--mdc-dialog-subhead-weight, var(--mat-sys-headline-small-weight, 400));letter-spacing:var(--mdc-dialog-subhead-tracking, var(--mat-sys-headline-small-tracking, 0.03125em))}.mat-mdc-dialog-content{display:block;flex-grow:1;box-sizing:border-box;margin:0;overflow:auto;max-height:65vh}.mat-mdc-dialog-content>:first-child{margin-top:0}.mat-mdc-dialog-content>:last-child{margin-bottom:0}.mat-mdc-dialog-container .mat-mdc-dialog-content{color:var(--mdc-dialog-supporting-text-color, var(--mat-sys-on-surface-variant, rgba(0, 0, 0, 0.6)));font-family:var(--mdc-dialog-supporting-text-font, var(--mat-sys-body-medium-font, inherit));line-height:var(--mdc-dialog-supporting-text-line-height, var(--mat-sys-body-medium-line-height, 1.5rem));font-size:var(--mdc-dialog-supporting-text-size, var(--mat-sys-body-medium-size, 1rem));font-weight:var(--mdc-dialog-supporting-text-weight, var(--mat-sys-body-medium-weight, 400));letter-spacing:var(--mdc-dialog-supporting-text-tracking, var(--mat-sys-body-medium-tracking, 0.03125em))}.mat-mdc-dialog-container .mat-mdc-dialog-content{padding:var(--mat-dialog-content-padding, 20px 24px)}.mat-mdc-dialog-container-with-actions .mat-mdc-dialog-content{padding:var(--mat-dialog-with-actions-content-padding, 20px 24px 0)}.mat-mdc-dialog-container .mat-mdc-dialog-title+.mat-mdc-dialog-content{padding-top:0}.mat-mdc-dialog-actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid rgba(0,0,0,0);padding:var(--mat-dialog-actions-padding, 16px 24px);justify-content:var(--mat-dialog-actions-alignment, flex-end)}@media(forced-colors: active){.mat-mdc-dialog-actions{border-top-color:CanvasText}}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-start,.mat-mdc-dialog-actions[align=start]{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}.mat-mdc-dialog-component-host{display:contents}
`],encapsulation:2})}return o})(),Nn="--mat-dialog-transition-duration";function Bn(o){return o==null?null:typeof o=="number"?o:o.endsWith("ms")?bi(o.substring(0,o.length-2)):o.endsWith("s")?bi(o.substring(0,o.length-1))*1e3:o==="0"?0:null}var dt=function(o){return o[o.OPEN=0]="OPEN",o[o.CLOSING=1]="CLOSING",o[o.CLOSED=2]="CLOSED",o}(dt||{}),Ye=class{_ref;_containerInstance;componentInstance;componentRef;disableClose;id;_afterOpened=new F;_beforeClosed=new F;_result;_closeFallbackTimeout;_state=dt.OPEN;_closeInteractionType;constructor(t,e,i){this._ref=t,this._containerInstance=i,this.disableClose=e.disableClose,this.id=t.id,t.addPanelClass("mat-mdc-dialog-panel"),i._animationStateChanged.pipe(te(n=>n.state==="opened"),W(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),i._animationStateChanged.pipe(te(n=>n.state==="closed"),W(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),t.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),Le(this.backdropClick(),this.keydownEvents().pipe(te(n=>n.keyCode===27&&!this.disableClose&&!We(n)))).subscribe(n=>{this.disableClose||(n.preventDefault(),Vn(this,n.type==="keydown"?"keyboard":"mouse"))})}close(t){this._result=t,this._containerInstance._animationStateChanged.pipe(te(e=>e.state==="closing"),W(1)).subscribe(e=>{this._beforeClosed.next(t),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),e.totalTime+100)}),this._state=dt.CLOSING,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(t){let e=this._ref.config.positionStrategy;return t&&(t.left||t.right)?t.left?e.left(t.left):e.right(t.right):e.centerHorizontally(),t&&(t.top||t.bottom)?t.top?e.top(t.top):e.bottom(t.bottom):e.centerVertically(),this._ref.updatePosition(),this}updateSize(t="",e=""){return this._ref.updateSize(t,e),this}addPanelClass(t){return this._ref.addPanelClass(t),this}removePanelClass(t){return this._ref.removePanelClass(t),this}getState(){return this._state}_finishDialogClose(){this._state=dt.CLOSED,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}};function Vn(o,t,e){return o._closeInteractionType=t,o.close(e)}var Un=new P("MatMdcDialogData"),Hn=new P("mat-mdc-dialog-default-options"),$n=new P("mat-mdc-dialog-scroll-strategy",{providedIn:"root",factory:()=>{let o=l(ne);return()=>o.scrollStrategies.block()}});var mt=(()=>{class o{_overlay=l(ne);_defaultOptions=l(Hn,{optional:!0});_scrollStrategy=l($n);_parentDialog=l(o,{optional:!0,skipSelf:!0});_idGenerator=l(ve);_dialog=l(On);_openDialogsAtThisLevel=[];_afterAllClosedAtThisLevel=new F;_afterOpenedAtThisLevel=new F;dialogConfigClass=ht;_dialogRefConstructor;_dialogContainerType;_dialogDataToken;get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){let e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}afterAllClosed=_t(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(he(void 0)));constructor(){this._dialogRefConstructor=Ye,this._dialogContainerType=jn,this._dialogDataToken=Un}open(e,i){let n;i=v(v({},this._defaultOptions||new ht),i),i.id=i.id||this._idGenerator.getId("mat-mdc-dialog-"),i.scrollStrategy=i.scrollStrategy||this._scrollStrategy();let r=this._dialog.open(e,ee(v({},i),{positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:i},{provide:xe,useValue:i}]},templateContext:()=>({dialogRef:n}),providers:(s,c,d)=>(n=new this._dialogRefConstructor(s,i,d),n.updatePosition(i?.position),[{provide:this._dialogContainerType,useValue:d},{provide:this._dialogDataToken,useValue:c.data},{provide:this._dialogRefConstructor,useValue:n}])}));return n.componentRef=r.componentRef,n.componentInstance=r.componentInstance,this.openDialogs.push(n),this.afterOpened.next(n),n.afterClosed().subscribe(()=>{let s=this.openDialogs.indexOf(n);s>-1&&(this.openDialogs.splice(s,1),this.openDialogs.length||this._getAfterAllClosed().next())}),n}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(e){return this.openDialogs.find(i=>i.id===e)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(e){let i=e.length;for(;i--;)e[i].close()}static \u0275fac=function(i){return new(i||o)};static \u0275prov=J({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var rr=["localVideo"],sr=["remoteVideo"];function ar(o,t){if(o&1){let e=U();h(0,"button",8),D("click",function(){T(e);let n=y();return M(n.acceptCall())}),h(1,"mat-icon"),w(2," call "),m(),w(3," Accept "),m(),h(4,"button",9),D("click",function(){T(e);let n=y();return M(n.declineCall())}),h(5,"mat-icon"),w(6," call_end "),m(),w(7," Decline "),m()}}function cr(o,t){if(o&1){let e=U();h(0,"button",8),D("click",function(){T(e);let n=y();return M(n.startCall())}),h(1,"mat-icon"),w(2," call "),m(),w(3," Start Call "),m()}}function lr(o,t){if(o&1){let e=U();h(0,"button",10),D("click",function(){T(e);let n=y();return M(n.endCall())}),h(1,"mat-icon"),w(2," call_end "),m(),w(3," End Call "),m()}}var Xe=class o{localVideo;remoteVideo;peerConnection;signalRService=l(ke);dialogRef=l(Ye);ngOnInit(){this.setupPeerConnection(),this.startLocalVideo(),this.signalRService.startConnection(),this.setupSignaListers()}setupSignaListers(){this.signalRService.hubConnection.on("CallEnded",()=>{}),this.signalRService.answerReceived.subscribe(t=>g(this,null,function*(){t&&(yield this.peerConnection.setRemoteDescription(new RTCSessionDescription(t.answer)))})),this.signalRService.iceCandidateReceived.subscribe(t=>g(this,null,function*(){t&&(yield this.peerConnection.addIceCandidate(new RTCIceCandidate(t.candidate)))}))}declineCall(){this.signalRService.incomingCall=!1,this.signalRService.isCallActive=!1,this.signalRService.sendEndCall(this.signalRService.remoteUserId),this.dialogRef.close()}acceptCall(){return g(this,null,function*(){this.signalRService.incomingCall=!1,this.signalRService.isCallActive=!0;let t=yield this.signalRService.offerReceived.getValue()?.offer;if(t){yield this.peerConnection.setRemoteDescription(new RTCSessionDescription(t));let e=yield this.peerConnection.createAnswer();yield this.peerConnection.setLocalDescription(e),this.signalRService.sendAnswer(this.signalRService.remoteUserId,e)}})}startCall(){return g(this,null,function*(){this.signalRService.isCallActive=!0;let t=yield this.peerConnection.createOffer();yield this.peerConnection.setLocalDescription(t),this.signalRService.sendOffer(this.signalRService.remoteUserId,t)})}setupPeerConnection(){this.peerConnection=new RTCPeerConnection({iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun.services.mozilla.com"}]}),this.peerConnection.onicecandidate=t=>{t.candidate&&this.signalRService.sendIceCandidate(this.signalRService.remoteUserId,t.candidate)},this.peerConnection.ontrack=t=>{this.remoteVideo.nativeElement.srcObject=t.streams[0]}}startLocalVideo(){return g(this,null,function*(){let t=yield navigator.mediaDevices.getUserMedia({video:!0,audio:!0});this.localVideo.nativeElement.srcObject=t,t.getTracks().forEach(e=>this.peerConnection.addTrack(e,t))})}endCall(){return g(this,null,function*(){this.peerConnection&&(this.dialogRef.close(),this.signalRService.isCallActive=!1,this.signalRService.incomingCall=!1,this.signalRService.remoteUserId="",this.peerConnection.close(),this.peerConnection=new RTCPeerConnection,this.localVideo.nativeElement.srcObject=null);let t=this.localVideo.nativeElement.srcObject;t&&(t.getTracks().forEach(e=>e.stop()),this.localVideo.nativeElement.srcObject=null),this.signalRService.sendEndCall(this.signalRService.remoteUserId)})}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=C({type:o,selectors:[["app-video-chat"]],viewQuery:function(e,i){if(e&1&&(H(rr,5),H(sr,5)),e&2){let n;N(n=B())&&(i.localVideo=n.first),N(n=B())&&(i.remoteVideo=n.first)}},decls:9,vars:3,consts:[["localVideo",""],["remoteVideo",""],[1,"relative","h-full","w-full"],["autoplay","","playsInline","",1,"w-32","absolute","right-5","top-4","h-52","object-cover","border-e-red-500","border-2","rounded-lg"],["autoplay","","playsInline","",1,"w-full","h-full","right-5","object-cover","bg-slate-800"],[1,"absolute","bottom-10","left-0","right-0","z-50","flex","justify-center","space-x-3","p-4"],[1,"bg-green-500","flex","items-center","gap-2","hover:bg-gray-700","shadow-xl","text-white","font-bold","py-2","px-4","rounded-full"],[1,"bg-red-500","flex","items-center","gap-2","hover:bg-red-900","shadow-xl","text-white","font-bold","py-2","px-4","rounded-full"],[1,"bg-green-500","flex","items-center","gap-2","hover:bg-gray-700","shadow-xl","text-white","font-bold","py-2","px-4","rounded-full",3,"click"],[1,"bg-red-500","flex","items-center","gap-2","hover:bg-gray-700","shadow-xl","text-white","font-bold","py-2","px-4","rounded-full",3,"click"],[1,"bg-red-500","flex","items-center","gap-2","hover:bg-red-900","shadow-xl","text-white","font-bold","py-2","px-4","rounded-full",3,"click"]],template:function(e,i){e&1&&(h(0,"div",2),b(1,"video",3,0)(3,"video",4,1),h(5,"div",5),I(6,ar,8,0)(7,cr,4,0,"button",6)(8,lr,4,0,"button",7),m()()),e&2&&(p(6),R(i.signalRService.incomingCall?6:-1),p(),R(!i.signalRService.incomingCall&&!i.signalRService.isCallActive?7:-1),p(),R(i.signalRService.incomingCall?-1:8))},dependencies:[ye,we],encapsulation:2})};var dr=["chatBox"];function hr(o,t){if(o&1){let e=U();h(0,"div",0)(1,"div",2)(2,"div")(3,"span",3),w(4),ie(5,"titlecase"),m(),b(6,"br"),h(7,"span",4),w(8),m()(),h(9,"div",5),D("click",function(){T(e);let n=y();return M(n.displayDialog(n.chatService.currentOpenedChat().id))}),h(10,"mat-icon",6),w(11," video_call "),m()()(),h(12,"div"),b(13,"app-chat-box"),m(),h(14,"div",7)(15,"input",8),D("input",function(){T(e);let n=y();return M(n.chatService.notifyTyping())})("keydown.enter",function(){T(e);let n=y();return M(n.sendMessage())}),Wi("ngModelChange",function(n){T(e);let r=y();return $i(r.message,n)||(r.message=n),M(n)}),m(),h(16,"mat-icon",9),D("click",function(){T(e);let n=y();return M(n.sendMessage())}),w(17," send "),m()()()}if(o&2){let e,i,n=y();p(4),$(" ",Me(5,3,(e=n.chatService.currentOpenedChat())==null?null:e.fullName)," "),p(4),$(" ",n.chatService.statut((i=n.chatService.currentOpenedChat())==null?null:i.userName)," "),p(7),Hi("ngModel",n.message)}}function mr(o,t){o&1&&(h(0,"div",1),b(1,"img",10),m())}var li=class o{chatContainer;dialog=l(mt);chatService=l(ae);signalRService=l(ke);message="";sendMessage(){this.message&&(this.chatService.sendMessage(this.message),this.message="",this.scrollToBottom())}displayDialog(t){this.signalRService.remoteUserId=t,this.dialog.open(Xe,{width:"400px",height:"600px",disableClose:!0,autoFocus:!1})}scrollToBottom(){this.chatContainer&&(this.chatContainer.nativeElement.scrollTop=this.chatContainer.nativeElement.scrollHeight)}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=C({type:o,selectors:[["app-chat-window"]],viewQuery:function(e,i){if(e&1&&H(dr,5),e&2){let n;N(n=B())&&(i.chatContainer=n.first)}},decls:2,vars:1,consts:[[1,"relative","w-full","bg=[#dfe7f1]","h-full"],[1,"flex","flex-col","items-center","justify-center","p-4","h-full"],[1,"chat-header","flex","justify-between","items-center","border-b","w-full","bg-white","p-4"],[1,"font-bold","leading-normal"],[1,"text-gray-400","text-sm","font-bold"],[1,"cursor-pointer","hover:text-blue-500",3,"click"],[1,"cursor-pointer","hover:text-red-500"],[1,"absolute","flex","items-center","bottom-0","border-t","w-full","bg-white","p-4"],["type","text","placeholder","Type de message...",1,"w-full","bg-gray-200","focus:outline-none","text-gray-900","border","rounded-full","px-6","p-2",3,"input","keydown.enter","ngModelChange","ngModel"],[1,"ml-5","cursor-pointer","hover:text-blue-900",3,"click"],["src","chatopen.svg","alt",""]],template:function(e,i){e&1&&I(0,hr,18,5,"div",0)(1,mr,2,0,"div",1),e&2&&R(i.chatService.currentOpenedChat()?0:1)},dependencies:[$e,ye,we,wn,fn,bn,vn,ci],encapsulation:2})};function ur(o,t){if(o&1&&(h(0,"div",0)(1,"div",1),b(2,"img",2),h(3,"div",3)(4,"p",4),w(5),ie(6,"titlecase"),m(),h(7,"p",5),w(8),m()()()()),o&2){let e,i,n,r=y();p(2),E("src",(e=r.chatService.currentOpenedChat())==null?null:e.profilePicture,ge),p(3),$(" ",Me(6,3,(i=r.chatService.currentOpenedChat())==null?null:i.fullName)," "),p(3),$(" ",(n=r.chatService.currentOpenedChat())==null?null:n.userName," ")}}var di=class o{chatService=l(ae);static \u0275fac=function(e){return new(e||o)};static \u0275cmp=C({type:o,selectors:[["app-chat-right-sidebar"]],decls:1,vars:1,consts:[[1,"p-5"],[1,"flex","flex-col","text-center","items-center","mt-3"],["alt","profile pic",1,"rounded-full","mb-4","w-44","h-44","object-cover",3,"src"],[1,"ml-3"],[1,"text-lg","font-semibold"],[1,"text-sm","text-gray-500"]],template:function(e,i){e&1&&I(0,ur,9,5,"div",0),e&2&&R(i.chatService.currentOpenedChat()?0:-1)},dependencies:[$e],encapsulation:2})};var hi=class o{static \u0275fac=function(e){return new(e||o)};static \u0275cmp=C({type:o,selectors:[["app-chat"]],decls:6,vars:0,consts:[[1,"flex","rounded-3xl","h-full","justify-between"],[1,"bg-white","border-r","w-1/2"],[1,"w-full"],[1,"bg-gray-50","border-l","w-1/2"]],template:function(e,i){e&1&&(h(0,"div",0),b(1,"app-chat-sidebar",1),h(2,"div",2),b(3,"app-chat-window"),m(),h(4,"div",3),b(5,"app-chat-right-sidebar"),m()())},dependencies:[ai,li,di],encapsulation:2})};var Wn=(o,t)=>l(z).isLoggedIn()?!0:(l(Rt).navigate(["/login"]),!1);var zn=[{path:"register",loadComponent:()=>import("./chunk-SKL7SYOU.js").then(o=>o.RegisterComponent),canActivate:[yi]},{path:"login",loadComponent:()=>import("./chunk-5M6RYT4N.js").then(o=>o.LoginComponent),canActivate:[yi]},{path:"chat",component:hi,canActivate:[Wn]},{path:"**",redirectTo:"chat",pathMatch:"full"}];var Ei="Service workers are disabled or not supported by this browser",Ke=class{serviceWorker;worker;registration;events;constructor(t,e){if(this.serviceWorker=t,!t)this.worker=this.events=this.registration=new gt(i=>i.error(new Ne(5601,!1)));else{let i=null,n=new F;this.worker=new gt(u=>(i!==null&&u.next(i),n.subscribe(_=>u.next(_))));let r=()=>{let{controller:u}=t;u!==null&&(i=u,n.next(i))};t.addEventListener("controllerchange",r),r(),this.registration=this.worker.pipe(me(()=>t.getRegistration()));let s=new F;this.events=s.asObservable();let c=u=>{let{data:_}=u;_?.type&&s.next(_)};t.addEventListener("message",c),e?.get(Ct,null,{optional:!0})?.onDestroy(()=>{t.removeEventListener("controllerchange",r),t.removeEventListener("message",c)})}}postMessage(t,e){return new Promise(i=>{this.worker.pipe(W(1)).subscribe(n=>{n.postMessage(v({action:t},e)),i()})})}postMessageWithOperation(t,e,i){let n=this.waitForOperationCompleted(i),r=this.postMessage(t,e);return Promise.all([r,n]).then(([,s])=>s)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(t){let e;return typeof t=="string"?e=i=>i.type===t:e=i=>t.includes(i.type),this.events.pipe(te(e))}nextEventOfType(t){return this.eventsOfType(t).pipe(W(1))}waitForOperationCompleted(t){return new Promise((e,i)=>{this.eventsOfType("OPERATION_COMPLETED").pipe(te(n=>n.nonce===t),W(1),Ze(n=>{if(n.result!==void 0)return n.result;throw new Error(n.error)})).subscribe({next:e,error:i})})}get isEnabled(){return!!this.serviceWorker}},pr=(()=>{class o{sw;messages;notificationClicks;subscription;get isEnabled(){return this.sw.isEnabled}pushManager=null;subscriptionChanges=new F;constructor(e){if(this.sw=e,!e.isEnabled){this.messages=Fe,this.notificationClicks=Fe,this.subscription=Fe;return}this.messages=this.sw.eventsOfType("PUSH").pipe(Ze(n=>n.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(Ze(n=>n.data)),this.pushManager=this.sw.registration.pipe(Ze(n=>n.pushManager));let i=this.pushManager.pipe(me(n=>n.getSubscription()));this.subscription=new gt(n=>{let r=i.subscribe(n),s=this.subscriptionChanges.subscribe(n);return()=>{r.unsubscribe(),s.unsubscribe()}})}requestSubscription(e){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(Ei));let i={userVisibleOnly:!0},n=this.decodeBase64(e.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),r=new Uint8Array(new ArrayBuffer(n.length));for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return i.applicationServerKey=r,new Promise((s,c)=>{this.pushManager.pipe(me(d=>d.subscribe(i)),W(1)).subscribe({next:d=>{this.subscriptionChanges.next(d),s(d)},error:c})})}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(Ei));let e=i=>{if(i===null)throw new Ne(5602,!1);return i.unsubscribe().then(n=>{if(!n)throw new Ne(5603,!1);this.subscriptionChanges.next(null)})};return new Promise((i,n)=>{this.subscription.pipe(W(1),me(e)).subscribe({next:i,error:n})})}decodeBase64(e){return atob(e)}static \u0275fac=function(i){return new(i||o)(pi(Ke))};static \u0275prov=J({token:o,factory:o.\u0275fac})}return o})(),gr=(()=>{class o{sw;versionUpdates;unrecoverable;get isEnabled(){return this.sw.isEnabled}constructor(e){if(this.sw=e,!e.isEnabled){this.versionUpdates=Fe,this.unrecoverable=Fe;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(Ei));let e=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:e},e)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Ne(5601,!1));let e=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:e},e)}static \u0275fac=function(i){return new(i||o)(pi(Ke))};static \u0275prov=J({token:o,factory:o.\u0275fac})}return o})();var Gn=new P("");function fr(){let o=l(ut);if(!("serviceWorker"in navigator&&o.enabled!==!1))return;let t=l(Gn),e=l(Be),i=l(Ct);e.runOutsideAngular(()=>{let n=navigator.serviceWorker,r=()=>n.controller?.postMessage({action:"INITIALIZE"});n.addEventListener("controllerchange",r),i.onDestroy(()=>{n.removeEventListener("controllerchange",r)})}),e.runOutsideAngular(()=>{let n,{registrationStrategy:r}=o;if(typeof r=="function")n=new Promise(s=>r().subscribe(()=>s()));else{let[s,...c]=(r||"registerWhenStable:30000").split(":");switch(s){case"registerImmediately":n=Promise.resolve();break;case"registerWithDelay":n=qn(+c[0]||0);break;case"registerWhenStable":n=Promise.race([i.whenStable(),qn(+c[0])]);break;default:throw new Ne(5600,!1)}}n.then(()=>{i.destroyed||navigator.serviceWorker.register(t,{scope:o.scope}).catch(s=>console.error(Pi(5604,!1)))})})}function qn(o){return new Promise(t=>setTimeout(t,o))}function _r(o,t){return new Ke(o.enabled!==!1?navigator.serviceWorker:void 0,t)}var ut=class{enabled;scope;registrationStrategy};function Qn(o,t={}){return Li([pr,gr,{provide:Gn,useValue:o},{provide:ut,useValue:t},{provide:Ke,useFactory:_r,deps:[ut,ce]},Vi(fr)])}var Yn={providers:[Ki(),qi({eventCoalescing:!0}),Zi(zn),Qn("ngsw-worker.js",{enabled:!Gi(),registrationStrategy:"registerWhenStable:30000"})]};var br=["mat-internal-form-field",""],vr=["*"],Xn=(()=>{class o{labelPosition;static \u0275fac=function(i){return new(i||o)};static \u0275cmp=C({type:o,selectors:[["div","mat-internal-form-field",""]],hostAttrs:[1,"mdc-form-field","mat-internal-form-field"],hostVars:2,hostBindings:function(i,n){i&2&&X("mdc-form-field--align-end",n.labelPosition==="before")},inputs:{labelPosition:"labelPosition"},attrs:br,ngContentSelectors:vr,decls:1,vars:0,template:function(i,n){i&1&&(Te(),_e(0))},styles:[`.mat-internal-form-field{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:inline-flex;align-items:center;vertical-align:middle}.mat-internal-form-field>label{margin-left:0;margin-right:auto;padding-left:4px;padding-right:0;order:0}[dir=rtl] .mat-internal-form-field>label{margin-left:auto;margin-right:0;padding-left:0;padding-right:4px}.mdc-form-field--align-end>label{margin-left:auto;margin-right:0;padding-left:0;padding-right:4px;order:-1}[dir=rtl] .mdc-form-field--align-end .mdc-form-field--align-end label{margin-left:0;margin-right:auto;padding-left:4px;padding-right:0}
`],encapsulation:2,changeDetection:0})}return o})();var wr=["switch"],yr=["*"];function Cr(o,t){o&1&&(h(0,"span",10),Ie(),h(1,"svg",12),b(2,"path",13),m(),h(3,"svg",14),b(4,"path",15),m()())}var Sr=new P("mat-slide-toggle-default-options",{providedIn:"root",factory:()=>({disableToggleValue:!1,hideIcon:!1,disabledInteractive:!1})}),kr={provide:gn,useExisting:Oi(()=>Kn),multi:!0},mi=class{source;checked;constructor(t,e){this.source=t,this.checked=e}},Kn=(()=>{class o{_elementRef=l(G);_focusMonitor=l(De);_changeDetectorRef=l(be);defaults=l(Sr);_onChange=e=>{};_onTouched=()=>{};_validatorOnChange=()=>{};_uniqueId;_checked=!1;_createChangeEvent(e){return new mi(this,e)}_labelId;get buttonId(){return`${this.id||this._uniqueId}-button`}_switchElement;focus(){this._switchElement.nativeElement.focus()}_noopAnimations;_focused;name=null;id;labelPosition="after";ariaLabel=null;ariaLabelledby=null;ariaDescribedby;required;color;disabled=!1;disableRipple=!1;tabIndex=0;get checked(){return this._checked}set checked(e){this._checked=e,this._changeDetectorRef.markForCheck()}hideIcon;disabledInteractive;change=new le;toggleChange=new le;get inputId(){return`${this.id||this._uniqueId}-input`}constructor(){l(Pt).load(Lt);let e=l(new Ni("tabindex"),{optional:!0}),i=this.defaults,n=l(pe,{optional:!0});this.tabIndex=e==null?0:parseInt(e)||0,this.color=i.color||"accent",this._noopAnimations=n==="NoopAnimations",this.id=this._uniqueId=l(ve).getId("mat-mdc-slide-toggle-"),this.hideIcon=i.hideIcon??!1,this.disabledInteractive=i.disabledInteractive??!1,this._labelId=this._uniqueId+"-label"}ngAfterContentInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(e=>{e==="keyboard"||e==="program"?(this._focused=!0,this._changeDetectorRef.markForCheck()):e||Promise.resolve().then(()=>{this._focused=!1,this._onTouched(),this._changeDetectorRef.markForCheck()})})}ngOnChanges(e){e.required&&this._validatorOnChange()}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}writeValue(e){this.checked=!!e}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}validate(e){return this.required&&e.value!==!0?{required:!0}:null}registerOnValidatorChange(e){this._validatorOnChange=e}setDisabledState(e){this.disabled=e,this._changeDetectorRef.markForCheck()}toggle(){this.checked=!this.checked,this._onChange(this.checked)}_emitChangeEvent(){this._onChange(this.checked),this.change.emit(this._createChangeEvent(this.checked))}_handleClick(){this.disabled||(this.toggleChange.emit(),this.defaults.disableToggleValue||(this.checked=!this.checked,this._onChange(this.checked),this.change.emit(new mi(this,this.checked))))}_getAriaLabelledBy(){return this.ariaLabelledby?this.ariaLabelledby:this.ariaLabel?null:this._labelId}static \u0275fac=function(i){return new(i||o)};static \u0275cmp=C({type:o,selectors:[["mat-slide-toggle"]],viewQuery:function(i,n){if(i&1&&H(wr,5),i&2){let r;N(r=B())&&(n._switchElement=r.first)}},hostAttrs:[1,"mat-mdc-slide-toggle"],hostVars:13,hostBindings:function(i,n){i&2&&(Tt("id",n.id),O("tabindex",null)("aria-label",null)("name",null)("aria-labelledby",null),Ve(n.color?"mat-"+n.color:""),X("mat-mdc-slide-toggle-focused",n._focused)("mat-mdc-slide-toggle-checked",n.checked)("_mat-animation-noopable",n._noopAnimations))},inputs:{name:"name",id:"id",labelPosition:"labelPosition",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],ariaDescribedby:[0,"aria-describedby","ariaDescribedby"],required:[2,"required","required",K],color:"color",disabled:[2,"disabled","disabled",K],disableRipple:[2,"disableRipple","disableRipple",K],tabIndex:[2,"tabIndex","tabIndex",e=>e==null?0:He(e)],checked:[2,"checked","checked",K],hideIcon:[2,"hideIcon","hideIcon",K],disabledInteractive:[2,"disabledInteractive","disabledInteractive",K]},outputs:{change:"change",toggleChange:"toggleChange"},exportAs:["matSlideToggle"],features:[Dt([kr,{provide:_n,useExisting:o,multi:!0}]),gi],ngContentSelectors:yr,decls:13,vars:27,consts:[["switch",""],["mat-internal-form-field","",3,"labelPosition"],["role","switch","type","button",1,"mdc-switch",3,"click","tabIndex","disabled"],[1,"mdc-switch__track"],[1,"mdc-switch__handle-track"],[1,"mdc-switch__handle"],[1,"mdc-switch__shadow"],[1,"mdc-elevation-overlay"],[1,"mdc-switch__ripple"],["mat-ripple","",1,"mat-mdc-slide-toggle-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered"],[1,"mdc-switch__icons"],[1,"mdc-label",3,"click","for"],["viewBox","0 0 24 24","aria-hidden","true",1,"mdc-switch__icon","mdc-switch__icon--on"],["d","M19.69,5.23L8.96,15.96l-4.23-4.23L2.96,13.5l6,6L21.46,7L19.69,5.23z"],["viewBox","0 0 24 24","aria-hidden","true",1,"mdc-switch__icon","mdc-switch__icon--off"],["d","M20 13H4v-2h16v2z"]],template:function(i,n){if(i&1){let r=U();Te(),h(0,"div",1)(1,"button",2,0),D("click",function(){return T(r),M(n._handleClick())}),b(3,"span",3),h(4,"span",4)(5,"span",5)(6,"span",6),b(7,"span",7),m(),h(8,"span",8),b(9,"span",9),m(),I(10,Cr,5,0,"span",10),m()()(),h(11,"label",11),D("click",function(c){return T(r),M(c.stopPropagation())}),_e(12),m()()}if(i&2){let r=Ue(2);E("labelPosition",n.labelPosition),p(),X("mdc-switch--selected",n.checked)("mdc-switch--unselected",!n.checked)("mdc-switch--checked",n.checked)("mdc-switch--disabled",n.disabled)("mat-mdc-slide-toggle-disabled-interactive",n.disabledInteractive),E("tabIndex",n.disabled&&!n.disabledInteractive?-1:n.tabIndex)("disabled",n.disabled&&!n.disabledInteractive),O("id",n.buttonId)("name",n.name)("aria-label",n.ariaLabel)("aria-labelledby",n._getAriaLabelledBy())("aria-describedby",n.ariaDescribedby)("aria-required",n.required||null)("aria-checked",n.checked)("aria-disabled",n.disabled&&n.disabledInteractive?"true":null),p(8),E("matRippleTrigger",r)("matRippleDisabled",n.disableRipple||n.disabled)("matRippleCentered",!0),p(),R(n.hideIcon?-1:10),p(),E("for",n.buttonId),O("id",n._labelId)}},dependencies:[Ot,Xn],styles:[`.mdc-switch{align-items:center;background:none;border:none;cursor:pointer;display:inline-flex;flex-shrink:0;margin:0;outline:none;overflow:visible;padding:0;position:relative;width:var(--mdc-switch-track-width, 52px)}.mdc-switch.mdc-switch--disabled{cursor:default;pointer-events:none}.mdc-switch.mat-mdc-slide-toggle-disabled-interactive{pointer-events:auto}.mdc-switch__track{overflow:hidden;position:relative;width:100%;height:var(--mdc-switch-track-height, 32px);border-radius:var(--mdc-switch-track-shape, var(--mat-sys-corner-full))}.mdc-switch--disabled.mdc-switch .mdc-switch__track{opacity:var(--mdc-switch-disabled-track-opacity, 0.12)}.mdc-switch__track::before,.mdc-switch__track::after{border:1px solid rgba(0,0,0,0);border-radius:inherit;box-sizing:border-box;content:"";height:100%;left:0;position:absolute;width:100%;border-width:var(--mat-switch-track-outline-width, 2px);border-color:var(--mat-switch-track-outline-color, var(--mat-sys-outline))}.mdc-switch--selected .mdc-switch__track::before,.mdc-switch--selected .mdc-switch__track::after{border-width:var(--mat-switch-selected-track-outline-width, 2px);border-color:var(--mat-switch-selected-track-outline-color, transparent)}.mdc-switch--disabled .mdc-switch__track::before,.mdc-switch--disabled .mdc-switch__track::after{border-width:var(--mat-switch-disabled-unselected-track-outline-width, 2px);border-color:var(--mat-switch-disabled-unselected-track-outline-color, var(--mat-sys-on-surface))}@media(forced-colors: active){.mdc-switch__track{border-color:currentColor}}.mdc-switch__track::before{transition:transform 75ms 0ms cubic-bezier(0, 0, 0.2, 1);transform:translateX(0);background:var(--mdc-switch-unselected-track-color, var(--mat-sys-surface-variant))}.mdc-switch--selected .mdc-switch__track::before{transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.6, 1);transform:translateX(100%)}[dir=rtl] .mdc-switch--selected .mdc-switch--selected .mdc-switch__track::before{transform:translateX(-100%)}.mdc-switch--selected .mdc-switch__track::before{opacity:var(--mat-switch-hidden-track-opacity, 0);transition:var(--mat-switch-hidden-track-transition, opacity 75ms)}.mdc-switch--unselected .mdc-switch__track::before{opacity:var(--mat-switch-visible-track-opacity, 1);transition:var(--mat-switch-visible-track-transition, opacity 75ms)}.mdc-switch:enabled:hover:not(:focus):not(:active) .mdc-switch__track::before{background:var(--mdc-switch-unselected-hover-track-color, var(--mat-sys-surface-variant))}.mdc-switch:enabled:focus:not(:active) .mdc-switch__track::before{background:var(--mdc-switch-unselected-focus-track-color, var(--mat-sys-surface-variant))}.mdc-switch:enabled:active .mdc-switch__track::before{background:var(--mdc-switch-unselected-pressed-track-color, var(--mat-sys-surface-variant))}.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:hover:not(:focus):not(:active) .mdc-switch__track::before,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:focus:not(:active) .mdc-switch__track::before,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:active .mdc-switch__track::before,.mdc-switch.mdc-switch--disabled .mdc-switch__track::before{background:var(--mdc-switch-disabled-unselected-track-color, var(--mat-sys-surface-variant))}.mdc-switch__track::after{transform:translateX(-100%);background:var(--mdc-switch-selected-track-color, var(--mat-sys-primary))}[dir=rtl] .mdc-switch__track::after{transform:translateX(100%)}.mdc-switch--selected .mdc-switch__track::after{transform:translateX(0)}.mdc-switch--selected .mdc-switch__track::after{opacity:var(--mat-switch-visible-track-opacity, 1);transition:var(--mat-switch-visible-track-transition, opacity 75ms)}.mdc-switch--unselected .mdc-switch__track::after{opacity:var(--mat-switch-hidden-track-opacity, 0);transition:var(--mat-switch-hidden-track-transition, opacity 75ms)}.mdc-switch:enabled:hover:not(:focus):not(:active) .mdc-switch__track::after{background:var(--mdc-switch-selected-hover-track-color, var(--mat-sys-primary))}.mdc-switch:enabled:focus:not(:active) .mdc-switch__track::after{background:var(--mdc-switch-selected-focus-track-color, var(--mat-sys-primary))}.mdc-switch:enabled:active .mdc-switch__track::after{background:var(--mdc-switch-selected-pressed-track-color, var(--mat-sys-primary))}.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:hover:not(:focus):not(:active) .mdc-switch__track::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:focus:not(:active) .mdc-switch__track::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:active .mdc-switch__track::after,.mdc-switch.mdc-switch--disabled .mdc-switch__track::after{background:var(--mdc-switch-disabled-selected-track-color, var(--mat-sys-on-surface))}.mdc-switch__handle-track{height:100%;pointer-events:none;position:absolute;top:0;transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1);left:0;right:auto;transform:translateX(0);width:calc(100% - var(--mdc-switch-handle-width))}[dir=rtl] .mdc-switch__handle-track{left:auto;right:0}.mdc-switch--selected .mdc-switch__handle-track{transform:translateX(100%)}[dir=rtl] .mdc-switch--selected .mdc-switch__handle-track{transform:translateX(-100%)}.mdc-switch__handle{display:flex;pointer-events:auto;position:absolute;top:50%;transform:translateY(-50%);left:0;right:auto;transition:width 75ms cubic-bezier(0.4, 0, 0.2, 1),height 75ms cubic-bezier(0.4, 0, 0.2, 1),margin 75ms cubic-bezier(0.4, 0, 0.2, 1);width:var(--mdc-switch-handle-width);height:var(--mdc-switch-handle-height);border-radius:var(--mdc-switch-handle-shape, var(--mat-sys-corner-full))}[dir=rtl] .mdc-switch__handle{left:auto;right:0}.mat-mdc-slide-toggle .mdc-switch--unselected .mdc-switch__handle{width:var(--mat-switch-unselected-handle-size, 16px);height:var(--mat-switch-unselected-handle-size, 16px);margin:var(--mat-switch-unselected-handle-horizontal-margin, 0 8px)}.mat-mdc-slide-toggle .mdc-switch--unselected .mdc-switch__handle:has(.mdc-switch__icons){margin:var(--mat-switch-unselected-with-icon-handle-horizontal-margin, 0 4px)}.mat-mdc-slide-toggle .mdc-switch--selected .mdc-switch__handle{width:var(--mat-switch-selected-handle-size, 24px);height:var(--mat-switch-selected-handle-size, 24px);margin:var(--mat-switch-selected-handle-horizontal-margin, 0 24px)}.mat-mdc-slide-toggle .mdc-switch--selected .mdc-switch__handle:has(.mdc-switch__icons){margin:var(--mat-switch-selected-with-icon-handle-horizontal-margin, 0 24px)}.mat-mdc-slide-toggle .mdc-switch__handle:has(.mdc-switch__icons){width:var(--mat-switch-with-icon-handle-size, 24px);height:var(--mat-switch-with-icon-handle-size, 24px)}.mat-mdc-slide-toggle .mdc-switch:active:not(.mdc-switch--disabled) .mdc-switch__handle{width:var(--mat-switch-pressed-handle-size, 28px);height:var(--mat-switch-pressed-handle-size, 28px)}.mat-mdc-slide-toggle .mdc-switch--selected:active:not(.mdc-switch--disabled) .mdc-switch__handle{margin:var(--mat-switch-selected-pressed-handle-horizontal-margin, 0 22px)}.mat-mdc-slide-toggle .mdc-switch--unselected:active:not(.mdc-switch--disabled) .mdc-switch__handle{margin:var(--mat-switch-unselected-pressed-handle-horizontal-margin, 0 2px)}.mdc-switch--disabled.mdc-switch--selected .mdc-switch__handle::after{opacity:var(--mat-switch-disabled-selected-handle-opacity, 1)}.mdc-switch--disabled.mdc-switch--unselected .mdc-switch__handle::after{opacity:var(--mat-switch-disabled-unselected-handle-opacity, 0.38)}.mdc-switch__handle::before,.mdc-switch__handle::after{border:1px solid rgba(0,0,0,0);border-radius:inherit;box-sizing:border-box;content:"";width:100%;height:100%;left:0;position:absolute;top:0;transition:background-color 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1),border-color 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1);z-index:-1}@media(forced-colors: active){.mdc-switch__handle::before,.mdc-switch__handle::after{border-color:currentColor}}.mdc-switch--selected:enabled .mdc-switch__handle::after{background:var(--mdc-switch-selected-handle-color, var(--mat-sys-on-primary))}.mdc-switch--selected:enabled:hover:not(:focus):not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-selected-hover-handle-color, var(--mat-sys-primary-container))}.mdc-switch--selected:enabled:focus:not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-selected-focus-handle-color, var(--mat-sys-primary-container))}.mdc-switch--selected:enabled:active .mdc-switch__handle::after{background:var(--mdc-switch-selected-pressed-handle-color, var(--mat-sys-primary-container))}.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled.mdc-switch--selected:hover:not(:focus):not(:active) .mdc-switch__handle::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled.mdc-switch--selected:focus:not(:active) .mdc-switch__handle::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled.mdc-switch--selected:active .mdc-switch__handle::after,.mdc-switch--selected.mdc-switch--disabled .mdc-switch__handle::after{background:var(--mdc-switch-disabled-selected-handle-color, var(--mat-sys-surface))}.mdc-switch--unselected:enabled .mdc-switch__handle::after{background:var(--mdc-switch-unselected-handle-color, var(--mat-sys-outline))}.mdc-switch--unselected:enabled:hover:not(:focus):not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-unselected-hover-handle-color, var(--mat-sys-on-surface-variant))}.mdc-switch--unselected:enabled:focus:not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-unselected-focus-handle-color, var(--mat-sys-on-surface-variant))}.mdc-switch--unselected:enabled:active .mdc-switch__handle::after{background:var(--mdc-switch-unselected-pressed-handle-color, var(--mat-sys-on-surface-variant))}.mdc-switch--unselected.mdc-switch--disabled .mdc-switch__handle::after{background:var(--mdc-switch-disabled-unselected-handle-color, var(--mat-sys-on-surface))}.mdc-switch__handle::before{background:var(--mdc-switch-handle-surface-color)}.mdc-switch__shadow{border-radius:inherit;bottom:0;left:0;position:absolute;right:0;top:0}.mdc-switch:enabled .mdc-switch__shadow{box-shadow:var(--mdc-switch-handle-elevation-shadow)}.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:hover:not(:focus):not(:active) .mdc-switch__shadow,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:focus:not(:active) .mdc-switch__shadow,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:active .mdc-switch__shadow,.mdc-switch.mdc-switch--disabled .mdc-switch__shadow{box-shadow:var(--mdc-switch-disabled-handle-elevation-shadow)}.mdc-switch__ripple{left:50%;position:absolute;top:50%;transform:translate(-50%, -50%);z-index:-1;width:var(--mdc-switch-state-layer-size, 40px);height:var(--mdc-switch-state-layer-size, 40px)}.mdc-switch__ripple::after{content:"";opacity:0}.mdc-switch--disabled .mdc-switch__ripple::after{display:none}.mat-mdc-slide-toggle-disabled-interactive .mdc-switch__ripple::after{display:block}.mdc-switch:hover .mdc-switch__ripple::after{opacity:.04;transition:75ms opacity cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-slide-toggle.mat-mdc-slide-toggle-focused .mdc-switch .mdc-switch__ripple::after{opacity:.12}.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:enabled:focus .mdc-switch__ripple::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:enabled:active .mdc-switch__ripple::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:enabled:hover:not(:focus) .mdc-switch__ripple::after,.mdc-switch--unselected:enabled:hover:not(:focus) .mdc-switch__ripple::after{background:var(--mdc-switch-unselected-hover-state-layer-color, var(--mat-sys-on-surface))}.mdc-switch--unselected:enabled:focus .mdc-switch__ripple::after{background:var(--mdc-switch-unselected-focus-state-layer-color, var(--mat-sys-on-surface))}.mdc-switch--unselected:enabled:active .mdc-switch__ripple::after{background:var(--mdc-switch-unselected-pressed-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mdc-switch-unselected-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity));transition:opacity 75ms linear}.mdc-switch--selected:enabled:hover:not(:focus) .mdc-switch__ripple::after{background:var(--mdc-switch-selected-hover-state-layer-color, var(--mat-sys-primary))}.mdc-switch--selected:enabled:focus .mdc-switch__ripple::after{background:var(--mdc-switch-selected-focus-state-layer-color, var(--mat-sys-primary))}.mdc-switch--selected:enabled:active .mdc-switch__ripple::after{background:var(--mdc-switch-selected-pressed-state-layer-color, var(--mat-sys-primary));opacity:var(--mdc-switch-selected-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity));transition:opacity 75ms linear}.mdc-switch__icons{position:relative;height:100%;width:100%;z-index:1;transform:translateZ(0)}.mdc-switch--disabled.mdc-switch--unselected .mdc-switch__icons{opacity:var(--mdc-switch-disabled-unselected-icon-opacity, 0.38)}.mdc-switch--disabled.mdc-switch--selected .mdc-switch__icons{opacity:var(--mdc-switch-disabled-selected-icon-opacity, 0.38)}.mdc-switch__icon{bottom:0;left:0;margin:auto;position:absolute;right:0;top:0;opacity:0;transition:opacity 30ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-switch--unselected .mdc-switch__icon{width:var(--mdc-switch-unselected-icon-size, 16px);height:var(--mdc-switch-unselected-icon-size, 16px);fill:var(--mdc-switch-unselected-icon-color, var(--mat-sys-surface-variant))}.mdc-switch--unselected.mdc-switch--disabled .mdc-switch__icon{fill:var(--mdc-switch-disabled-unselected-icon-color, var(--mat-sys-surface-variant))}.mdc-switch--selected .mdc-switch__icon{width:var(--mdc-switch-selected-icon-size, 16px);height:var(--mdc-switch-selected-icon-size, 16px);fill:var(--mdc-switch-selected-icon-color, var(--mat-sys-on-primary-container))}.mdc-switch--selected.mdc-switch--disabled .mdc-switch__icon{fill:var(--mdc-switch-disabled-selected-icon-color, var(--mat-sys-on-surface))}.mdc-switch--selected .mdc-switch__icon--on,.mdc-switch--unselected .mdc-switch__icon--off{opacity:1;transition:opacity 45ms 30ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-slide-toggle{-webkit-user-select:none;user-select:none;display:inline-block;-webkit-tap-highlight-color:rgba(0,0,0,0);outline:0}.mat-mdc-slide-toggle .mat-mdc-slide-toggle-ripple,.mat-mdc-slide-toggle .mdc-switch__ripple::after{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:50%;pointer-events:none}.mat-mdc-slide-toggle .mat-mdc-slide-toggle-ripple:not(:empty),.mat-mdc-slide-toggle .mdc-switch__ripple::after:not(:empty){transform:translateZ(0)}.mat-mdc-slide-toggle.mat-mdc-slide-toggle-focused .mat-focus-indicator::before{content:""}.mat-mdc-slide-toggle .mat-internal-form-field{color:var(--mat-switch-label-text-color, var(--mat-sys-on-surface));font-family:var(--mat-switch-label-text-font, var(--mat-sys-body-medium-font));line-height:var(--mat-switch-label-text-line-height, var(--mat-sys-body-medium-line-height));font-size:var(--mat-switch-label-text-size, var(--mat-sys-body-medium-size));letter-spacing:var(--mat-switch-label-text-tracking, var(--mat-sys-body-medium-tracking));font-weight:var(--mat-switch-label-text-weight, var(--mat-sys-body-medium-weight))}.mat-mdc-slide-toggle .mat-ripple-element{opacity:.12}.mat-mdc-slide-toggle .mat-focus-indicator::before{border-radius:50%}.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle-track,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__icon,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle::before,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle::after,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__track::before,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__track::after{transition:none}.mat-mdc-slide-toggle .mdc-switch:enabled+.mdc-label{cursor:pointer}.mat-mdc-slide-toggle .mdc-switch--disabled+label{color:var(--mdc-switch-disabled-label-text-color)}
`],encapsulation:2,changeDetection:0})}return o})();var Jn=(()=>{class o{static \u0275fac=function(i){return new(i||o)};static \u0275mod=fe({type:o});static \u0275inj=ue({imports:[Kn,ze,ze]})}return o})();var ui=class o{title="FRONTEND";signalRService=l(ke);authService=l(z);dialog=l(mt);ngOnInit(){this.authService.getAccessToken&&(this.signalRService.startConnection(),this.startOfferReceive())}startOfferReceive(){this.signalRService.offerReceived.subscribe(t=>g(this,null,function*(){t&&(new Audio("assets/phone-ring.mp3").play(),this.dialog.open(Xe,{width:"400px",height:"600px",disableClose:!1}),this.signalRService.remoteUserId=t.senderId,this.signalRService.incomingCall=!0)}))}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=C({type:o,selectors:[["app-root"]],decls:1,vars:0,template:function(e,i){e&1&&b(0,"router-outlet")},dependencies:[Jn,Ji],encapsulation:2})};Xi(ui,Yn).catch(o=>console.error(o));
